(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{454:function(e,t){},456:function(e,t){},488:function(e,t){},489:function(e,t){},559:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(11),l=a(13),s=a(12),o=a(14),c=a(0),i=a.n(c),m=a(15),u=a(542),d=a(543),p=a(153),h=a(540),g=a(307),E=a(20),f=a.n(E),b=(a(77),a(541)),v=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={purposes:[],purposes_total:[],loading:!1,date:[new Date]},a.componentDidMount=function(){a.getPurposes()},a.componentWillReceiveProps=function(e){var t=e.date;a.setState({date:t})},a.getPurposes=function(){a.setState({loading:!0,purposes_total:[]}),a.props.models.Purpose.collection({limit:999,offset:0,attributes:["id","name"]}).then(function(e){var t=e.rows;a.setState({loading:!1},function(){t.map(function(e){return a.getTotalQueuePerPurpose(e)})})})},a.getTotalQueuePerPurpose=function(e){a.props.models.Queue.collection({limit:0,offset:0,where:{purpose_id:e.id,date:a.state.date.length>0?{$between:[f()(a.state.date[0]).format("YYYY-MM-DD hh:mm:ss"),f()(a.state.date[1]).format("YYYY-MM-DD hh:mm:ss")]}:f()(a.state.date[0]).format("YYYY-MM-DD")}}).then(function(t){var n=t.count,r=a.state.purposes_total,l=e.name;r.push({name:l,count:n}),a.setState({purposes_total:r})})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.loading&&i.a.createElement("p",{className:"text-center m-0"},"Loading..."),this.state.purposes_total.map(function(e,t){return i.a.createElement(p.a,{key:t,color:"dark",className:"border-0 shadow my-2"},i.a.createElement(h.a,{className:"text-white p-2 d-flex justify-content-between align-items-center"},i.a.createElement("p",{className:"d-block m-0"},e.name.toUpperCase()),i.a.createElement(b.a,{color:"danger",className:"d-block p-2",pill:!0},e.count)))}))}}]),t}(c.Component),y=a(189),k=a.n(y),N=(a(190),a(401),function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={queues_count:0,arrived:0,unarrived:0,unserved:0,date:[new Date,new Date]},a.componentDidMount=function(){document.title="Halaman Utama",f.a.locale("id"),a.getQueuesCount(),a.getArrivedQueues(),a.getUnarrivedQueues(),a.getUnservedQueues()},a.getQueuesCount=function(){a.props.models.Queue.collection({limit:0,offset:0,where:{date:new Date}}).then(function(e){return a.setState({queues_count:e.count})})},a.getArrivedQueues=function(){var e=a.props.models.Queue,t=a.state.date;e.collection({limit:0,offset:0,where:{date:t.length>0?{$between:[f()(t[0]).format("YYYY-MM-DD hh:mm:ss"),f()(t[1]).format("YYYY-MM-DD hh:mm:ss")]}:f()(t[0]).format("YYYY-MM-DD"),status:"Datang"}}).then(function(e){return a.setState({arrived:e.count})})},a.getUnarrivedQueues=function(){var e=a.props.models.Queue,t=a.state.date;e.collection({limit:0,offset:0,where:{date:t.length>0?{$between:[f()(t[0]).format("YYYY-MM-DD hh:mm:ss"),f()(t[1]).format("YYYY-MM-DD hh:mm:ss")]}:f()(t[0]).format("YYYY-MM-DD"),status:"Tidak Datang"}}).then(function(e){return a.setState({unarrived:e.count})})},a.getUnservedQueues=function(){var e=a.props.models.Queue,t=a.state.date;e.collection({limit:0,offset:0,where:{date:t.length>0?{$between:[f()(t[0]).format("YYYY-MM-DD hh:mm:ss"),f()(t[1]).format("YYYY-MM-DD hh:mm:ss")]}:f()(t[0]).format("YYYY-MM-DD"),status:"Belum Datang"}}).then(function(e){return a.setState({unserved:e.count})})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"card-body"},i.a.createElement("h5",{className:"text-right m-0"},"Main Dashboard"),i.a.createElement("hr",null),i.a.createElement(u.a,{noGutters:!0},i.a.createElement(d.a,{md:"2"},i.a.createElement(k.a,{value:this.state.date,options:{locale:"id",mode:"range"},onChange:function(t){return e.setState({date:t},function(){e.total.getPurposes(),e.getArrivedQueues(),e.getQueuesCount(),e.getUnarrivedQueues(),e.getUnservedQueues()})},className:"form-control form-control-sm",placeholder:"Pilih tanggal"})),i.a.createElement(d.a,{md:"12"}),i.a.createElement(d.a,{md:"3"},i.a.createElement(p.a,{className:"shadow border-0 bg-info text-white mx-1 my-2"},i.a.createElement(h.a,{className:"d-flex flex-row justify-content-between align-items-center"},i.a.createElement("div",{className:"d-flex flex-column justify-content-between"},i.a.createElement("h4",{className:"m-0"},"Pendaftar"),i.a.createElement("p",{className:"m-0 small"},f()(this.state.date[0]).format("DD MMMM YYYY"))),i.a.createElement("h1",{style:{fontSize:"3.5em"},className:"m-0"},this.state.queues_count)))),i.a.createElement(d.a,{md:"3"},i.a.createElement(p.a,{className:"shadow border-0 bg-primary text-white mx-1 my-2"},i.a.createElement(h.a,{className:"d-flex flex-row justify-content-between align-items-center"},i.a.createElement("div",{className:"d-flex flex-column justify-content-between"},i.a.createElement("h4",{className:"m-0"},"Datang"),i.a.createElement("p",{className:"m-0 small"},f()(this.state.date[0]).format("DD MMMM YYYY"))),i.a.createElement("h1",{style:{fontSize:"3.5em"},className:"m-0"},this.state.arrived)))),i.a.createElement(d.a,{md:"3"},i.a.createElement(p.a,{className:"shadow border-0 bg-warning text-dark mx-1 my-2"},i.a.createElement(h.a,{className:"d-flex flex-row justify-content-between align-items-center"},i.a.createElement("div",{className:"d-flex flex-column justify-content-between"},i.a.createElement("h4",{className:"m-0"},"Tidak Datang"),i.a.createElement("p",{className:"m-0 small"},f()(this.state.date[0]).format("DD MMMM YYYY"))),i.a.createElement("h1",{style:{fontSize:"3.5em"},className:"m-0"},this.state.unarrived)))),i.a.createElement(d.a,{md:"3"},i.a.createElement(p.a,{className:"shadow border-0 bg-dark text-white mx-1 my-2"},i.a.createElement(h.a,{className:"d-flex flex-row justify-content-between align-items-center"},i.a.createElement("div",{className:"d-flex flex-column justify-content-between"},i.a.createElement("h4",{className:"m-0"},"Belum Terlayani"),i.a.createElement("p",{className:"m-0 small"},f()(this.state.date[0]).format("DD MMMM YYYY"))),i.a.createElement("h1",{style:{fontSize:"3.5em"},className:"m-0"},this.state.unserved))))),i.a.createElement("hr",null),i.a.createElement(u.a,null,i.a.createElement(d.a,{md:"6"},i.a.createElement(g.a,{data:{datasets:[{data:Object.keys(this.state).filter(function(e){return"queues_count"!==e}).map(function(t){return e.state[t]}),backgroundColor:["rgba(54, 162, 235, 0.5)","rgba(255, 99, 132, 0.5)","rgba(52, 58, 64, 0.5)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(52, 58, 64, 1)"]}],labels:["Datang","Tidak Datang","Belum Dilayani"]},width:120,height:75})),i.a.createElement(d.a,{md:"6"},i.a.createElement(v,{ref:function(t){return e.total=t},date:this.state.date,models:this.props.models}))))}}]),t}(c.Component)),S=a(42),C=a(562),w=a(544),q=a(545),D=a(151),j=a(152),O=function(e){return i.a.createElement("input",{type:e.type,className:"form-control my-2",name:e.name,value:e.value,placeholder:e.placeholder,onChange:e.onChange})},x=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={name:"",username:"",password:"",type:"administrator",edit:!1,modal:!1,loading:!1},a.onChange=function(e){a.setState(Object(S.a)({},e.target.name,e.target.value))},a.submit=function(e){e.preventDefault(),a.setState({loading:!0});var t=a.state,n=t.username,r=t.name,l=t.password,s=t.type;a.props.onClick({username:n,name:r,password:l,type:s},function(){a.setState({loading:!1},a.clear())})},a.clear=function(){return a.setState({name:"",username:"",password:"",type:"administrator",edit:!1,modal:!1})},a.editSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.name,l=t.type,s=t.password;a.props.update({username:n,name:r,type:l,password:s},a.clear)},a.componentWillReceiveProps=function(e){var t=e.user,n=t.name,r=t.type,l=t.username,s=e.edit;a.setState({name:n,type:r,username:l,edit:s})},a.open=function(){return a.setState({modal:!0})},a.close=function(){return a.setState({modal:!1})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(C.a,{size:"lg",toggle:this.close,isOpen:this.state.modal},i.a.createElement(w.a,{color:"success",toggle:this.close},this.state.edit?"Edit ".concat(this.state.name):"Tambah Pengguna"),i.a.createElement(q.a,null,i.a.createElement("form",{className:"form-group"},i.a.createElement(O,{placeholder:"Nama Lengkap",type:"text",name:"name",value:this.state.name,onChange:this.onChange}),i.a.createElement(O,{placeholder:"Username",type:"text",name:"username",value:this.state.username,onChange:this.onChange}),i.a.createElement(O,{placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.onChange}),i.a.createElement("select",{name:"type",value:this.state.type,onChange:function(t){return e.setState({type:t.target.value})},className:"form-control"},i.a.createElement("option",{value:""},"Pilih tipe user"),i.a.createElement("option",{value:"administrator"},"Administrator"),i.a.createElement("option",{value:"operator"},"Operator")),i.a.createElement("hr",null),this.state.loading&&i.a.createElement(i.a.Fragment,null,i.a.createElement("hr",null),i.a.createElement(D.a,{color:"success"},i.a.createElement(j.a,{size:"sm"}),"\xa0Loading"),i.a.createElement("hr",null)),!this.state.edit&&i.a.createElement("button",{type:"button",onClick:this.submit,className:"btn btn-success"},"Daftar"),this.state.edit&&i.a.createElement("button",{type:"button",onClick:this.editSubmit,className:"btn btn-success"},"Simpan"),this.state.edit&&i.a.createElement("button",{type:"button",onClick:this.clear,className:"btn btn-danger"},"Batal"))))}}]),t}(c.Component),_=a(160),P=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={users:{rows:[],count:0},limit:10,offset:0,page:1,total_page:1,user:{name:"",username:"",type:""},edit:!1,loading:!1},a.componentDidMount=function(){document.title="Pengguna",a.getUser(!0)},a.getUser=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props.models.User,n=a.state,r=n.limit,l=n.offset;e&&a.setState({loading:!0}),t.collection({limit:r,offset:l}).then(function(e){var t=Math.ceil(e.count/r);a.setState({users:e,total_page:t,loading:!1})})},a.next=function(){var e=a.state,t=e.limit,n=e.page,r=e.total_page;n=n<=r?n+1:r;var l=parseInt((n-1)*t);a.setState({offset:l,total_page:r,page:n},function(){return a.getUser(!0)})},a.prev=function(){var e=a.state,t=e.limit,n=e.page,r=e.total_page;n=n>1?n-1:1;var l=parseInt((n-1)*t);a.setState({offset:l,total_page:r,page:n},function(){return a.getUser(!0)})},a.addUser=function(e,t){a.props.models.User.create(e).then(function(){a.getUser(),t()}).catch(function(e){alert(e.toString())})},a.deleteUser=function(e){e.delete().then(function(){return a.getUser()})},a.updateUser=function(e,t){a.state.user.update(e).then(function(){t(),a.getUser(),a.setState({user:{},edit:!1})})},a.edit=function(e){return a.setState({user:e,edit:!0},function(){return a.register.open()})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-body"},i.a.createElement("h5",{className:"mb-2"},"User"),i.a.createElement("hr",null),i.a.createElement(x,{ref:function(t){return e.register=t},update:this.updateUser,user:this.state.user,edit:this.state.edit,onClick:this.addUser}),i.a.createElement("div",{className:"d-flex flex-row justify-content-between"},this.state.total_page>0&&i.a.createElement("div",{className:"btn-group btn-group-sm"},i.a.createElement("button",{className:"btn btn-primary",onClick:this.prev},"Prev"),i.a.createElement("button",{className:"btn btn-light",disabled:!0},this.state.page,"/",this.state.total_page),i.a.createElement("button",{className:"btn btn-primary",onClick:this.next},"Next")),i.a.createElement("button",{onClick:function(){return e.register.open()},className:"btn btn-outline-success btn-sm"},i.a.createElement(_.a,null),"\xa0Tambah Pengguna"))),i.a.createElement("table",{className:"table table-striped table-bordered"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No."),i.a.createElement("th",null,"Nama"),i.a.createElement("th",null,"Username"),i.a.createElement("th",null,"Tipe"),i.a.createElement("th",null,"Edit/Delete"))),i.a.createElement("tbody",null,this.state.loading?i.a.createElement("tr",null,i.a.createElement("td",{colSpan:5},i.a.createElement("p",{className:"text-center text-muted m-0"},i.a.createElement(j.a,{size:"sm",color:"secondary"}),"\xa0Loading"))):this.state.users.rows.map(function(t,a){return i.a.createElement(M,{key:a,edit:e.edit,index:a+1+e.state.offset,onClick:e.deleteUser,user:t})}))),i.a.createElement("div",{className:"card-body"},this.state.total_page>0&&i.a.createElement("div",{className:"btn-group btn-group-sm"},i.a.createElement("button",{className:"btn btn-primary",onClick:this.prev},"Prev"),i.a.createElement("button",{className:"btn btn-light",disabled:!0},this.state.page,"/",this.state.total_page),i.a.createElement("button",{className:"btn btn-primary",onClick:this.next},"Next"))))}}]),t}(c.Component),M=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.index),i.a.createElement("td",null,e.user.name),i.a.createElement("td",null,e.user.username),i.a.createElement("td",null,e.user.type.charAt(0).toUpperCase()+e.user.type.slice(1)),i.a.createElement("td",null,i.a.createElement("button",{onClick:function(){return e.edit(e.user)},className:"btn btn-warning btn-sm"},"Edit"),i.a.createElement("button",{onClick:function(){return e.onClick(e.user)},className:"btn btn-danger btn-sm"},"Hapus")))},T=a(546),Y=a(547),z=a(548),Q=a(229),L=a(170),A=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,name:"",requirements:[],fields:[],requirement:"",required:[],loading:!1,filter:[],submitting:!1},a.open=function(){a.setState({open:!0}),a.getRequirements()},a.close=function(){a.setState({open:!1})},a.add=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.fields;a.setState({submitting:!0}),a.props.add({name:n,requirements:r},function(){return a.setState({submitting:!1})})},a.removeRequirement=function(e){for(var t=a.state,n=t.requirements,r=t.fields.filter(function(t){return t.name!==e}),l=0;l<n.length;l++)e===n[l].label&&(n[l].disable=!1);a.setState({requirements:n,fields:r})},a.addRequirement=function(){var e=a.state,t=e.requirement,n=e.fields,r=e.filter,l=e.requirements;n.push({name:t.value,required:!0});for(var s=0;s<l.length;s++)t.label===l[s].label&&(l[s].disable=!0);a.setState({fields:n,requirement:"",filter:r,requirements:l})},a.getRequirements=function(){var e=a.props.models.Requirement;a.setState({loading:!0}),e.collection({limit:999,offset:0}).then(function(e){var t=e.rows.map(function(e){return{value:e.name,label:e.name,disable:!1}});a.setState({requirements:t,loading:!1})})},a.onChange=function(e){var t=a.state.fields;t[e].required=!t[e].required,a.setState({fields:t})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(C.a,{isOpen:this.state.open,size:"lg",backdrop:"static"},i.a.createElement(w.a,null,"Tambah Tujuan"),i.a.createElement(q.a,null,i.a.createElement(T.a,{name:"name",placeholder:"Tujuan",onChange:function(t){return e.setState({name:t.target.value})}}),i.a.createElement("hr",null),this.state.requirements.length>0?i.a.createElement(i.a.Fragment,null,!this.state.loading&&i.a.createElement(Q.a,{value:this.state.requirement,onChange:function(t){return e.setState({requirement:t})},placeholder:"Pilih Dokumen",ref:"select",isOptionDisabled:function(e){return e.disable},options:this.state.requirements}),i.a.createElement("hr",null),i.a.createElement("button",{disabled:""===this.state.requirement,type:"submit",onClick:this.addRequirement,className:"btn btn-success btn-sm rounded-pill"},"Tambah Persyaratan")):this.state.loading?i.a.createElement(D.a,{color:"info"},i.a.createElement(j.a,{color:"info",size:"sm"}),"\xa0Loading"):i.a.createElement(T.a,{disabled:!0,value:"Tidak ada dokumen"})),i.a.createElement("table",{className:"table table-striped table-bordered"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Persyaratan"),i.a.createElement("th",null,"Opsional"),i.a.createElement("th",null,"Hapus"))),i.a.createElement("tbody",null,0===this.state.fields.length&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"3"},i.a.createElement("p",{className:"m-0 text-center text-muted"},"Tambah dokumen jika diperlukan"))),this.state.fields.map(function(t,a){return i.a.createElement(F,Object.assign({removeRequirement:e.removeRequirement,checked:t.required,onChange:e.onChange,index:a,key:a},t))}))),i.a.createElement(q.a,null,this.state.submitting&&i.a.createElement(D.a,{color:"success"},i.a.createElement(j.a,{size:"sm"}),"\xa0Loading")),i.a.createElement(Y.a,null,i.a.createElement(z.a,{color:"success",outline:!0,onClick:this.add,className:"rounded-pill"},"Tambah Tujuan"),i.a.createElement(z.a,{color:"danger",outline:!0,onClick:this.close,className:"rounded-pill"},"Tutup")))}}]),t}(c.Component),F=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.name),i.a.createElement("td",null,i.a.createElement("input",{type:"checkbox",onChange:function(){return e.onChange(e.index)},value:!e.required,checked:e.required})),i.a.createElement("td",null,i.a.createElement("button",{onClick:function(){return e.removeRequirement(e.name)},className:"btn btn-outline-danger btn-sm"},i.a.createElement(L.o,null))))},U=a(549),R=a(550),I=a(154),B=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,name:"",requirements:{rows:[],count:1},page:1,offset:0,limit:10,totalPage:1,submitting:!1,requirement:{name:""},edit:!1,loading:!1},a.componentDidMount=function(){a.getList(!0)},a.getList=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props.models.Requirement;e&&a.setState({loading:!0}),t.collection({limit:5,offset:0}).then(function(e){var t=a.state.limit,n=Math.ceil(e.count/t);a.setState({requirements:e,totalPage:n,loading:!1})})},a.cancel=function(){a.setState({requirement:{name:""},edit:!1,name:""})},a.close=function(){a.setState({open:!1})},a.edit=function(e){return a.setState({edit:!0,requirement:e,name:e.name})},a.delete=function(e){e.delete().then(function(){return a.setState({requirement:{name:""},edit:!1},function(){return a.getList()})})},a.update=function(){var e=a.state,t=e.requirement,n=e.name;t.update({name:n}).then(function(){return a.setState({name:"",requirement:{name:""},edit:!1},function(){return a.getList()})})},a.addRequirement=function(e){e.preventDefault();var t=a.props.models.Requirement,n=a.state.name;a.setState({submitting:!0},function(){t.create({name:n}).then(function(){a.setState({name:"",submitting:!1},function(){return a.getList()})})})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{size:"lg",isOpen:this.state.open,backdrop:"static"},i.a.createElement(w.a,{className:"bg-danger border-bottom border-danger text-white",toggle:this.close},"Tambah Dokumen"),i.a.createElement(q.a,null,i.a.createElement("form",{action:"",method:"post"},i.a.createElement(U.a,null,i.a.createElement(T.a,{readOnly:this.state.submitting,placeholder:"Nama Dokumen",onChange:function(t){return e.setState({name:t.target.value})},value:this.state.submitting?"Menambah Dokumen":this.state.name,name:"name"}),i.a.createElement(R.a,{addonType:"append"},this.state.edit&&i.a.createElement(z.a,{color:"danger",outline:!0,onClick:this.cancel},"Cancel"),this.state.edit&&i.a.createElement(z.a,{color:"success",outline:!0,onClick:this.update},"Simpan"),!this.state.edit&&i.a.createElement(z.a,{color:"success",outline:!0,onClick:this.addRequirement},"Tambah"))),i.a.createElement("hr",null))),i.a.createElement(I.a,{striped:!0,hover:!0,bordered:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No."),i.a.createElement("th",null,"Nama"),i.a.createElement("th",null,"Edit/Hapus"))),i.a.createElement("tbody",null,this.state.loading?i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},i.a.createElement("p",{className:"text-muted m-0 text-center"},i.a.createElement(j.a,{size:"sm",color:"secondary"})," Loading"))):this.state.requirements.rows.length>0?this.state.requirements.rows.map(function(t,a){return i.a.createElement(H,{key:a,edit:e.edit,deleteRequirement:e.delete,req:t,index:a+1})}):i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},i.a.createElement("p",{className:"text-muted m-0 text-center"},"Belum Ada Dokumen Persyaratan"))))),i.a.createElement(Y.a,null,i.a.createElement(z.a,{outline:!0,onClick:this.close,color:"dark",size:"sm"},"Tutup"))))}}]),t}(c.Component),H=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.index),i.a.createElement("td",null,e.req.name),i.a.createElement("td",null,i.a.createElement("div",{className:"btn-group btn-group-sm"},i.a.createElement("button",{onClick:function(){return e.edit(e.req)},className:"btn btn-warning"},"Edit"),i.a.createElement("button",{onClick:function(){return e.deleteRequirement(e.req)},className:"btn btn-danger"},"Hapus"))))},J=a(551),K=a(552),G=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,reqs:[],req:"",name:"",loading:!1,requirements:[]},a.getRequirements=function(){a.setState({loading:!0}),a.props.models.Requirement.collection({limit:999,offset:0}).then(function(e){var t=e.rows.map(function(e){return{value:e.name,label:e.name,disabled:!1}});a.setState({reqs:t},function(){return a.check()})})},a.check=function(){for(var e=a.state,t=e.reqs,n=e.requirements,r=0;r<t.length;r++)for(var l=0;l<n.length;l++)t[r].label===n[l].name&&(t[r].disabled=!0);a.setState({reqs:t,loading:!1})},a.open=function(){var e=a.props.requirements,t=e.name,n=e.requirements;a.setState({open:!0,name:t,requirements:n},function(){return a.getRequirements()})},a.close=function(){return a.setState({open:!1})},a.save=function(){var e=a.state,t=e.name,n=e.requirements;a.props.requirements.update({name:t,requirements:n}).then(function(){a.close(),a.props.reload()})},a.addReq=function(){for(var e=a.state,t=e.req,n=e.reqs,r=e.requirements,l=0;l<n.length;l++)n[l].label===t.label&&(n[l].disabled=!0);r.push({name:t.label,required:!0}),a.setState({reqs:n,req:"",requirements:r})},a.removeReq=function(e){for(var t=a.state,n=t.requirements,r=t.reqs,l=0;l<r.length;l++)r[l].label===e.name&&(r[l].disabled=!1);var s=n.filter(function(t){return t.name!==e.name});a.setState({requirements:s})},a.checkClicked=function(e){var t=a.state.requirements;t[e.index].required=!t[e.index].required,a.setState({requirements:t})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state.requirements;return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{backdrop:"static",isOpen:this.state.open,size:"lg",style:{maxWitdh:"80%"}},i.a.createElement(w.a,{className:"bg-warning border-warning",toggle:this.close}),i.a.createElement(q.a,null,i.a.createElement("input",{type:"text",placeholder:"Tujuan",onChange:function(t){return e.setState({name:t.target.value})},className:"form-control rounded-pill my-3",value:this.state.name}),i.a.createElement("hr",null),!this.state.loading&&i.a.createElement(Q.a,{value:this.state.req,onChange:function(t){return e.setState({req:t})},isOptionDisabled:function(e){return e.disabled},placeholder:"Pilih Dokumen",options:this.state.reqs}),""===this.state.req?i.a.createElement(z.a,{color:"success",size:"sm",disabled:!0,className:"my-2"},"Tambah"):i.a.createElement(z.a,{color:"success",size:"sm",onClick:this.addReq,className:"my-2"},"Tambah")),i.a.createElement(I.a,{bordered:!0,hover:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Nama"),i.a.createElement("th",null,"Opsional"),i.a.createElement("th",null,"Hapus"))),i.a.createElement("tbody",null,t.length>0?t.map(function(t,a){return i.a.createElement(W,Object.assign({checkClicked:e.checkClicked,removeReq:e.removeReq},t,{key:a,index:a}))}):i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},i.a.createElement("p",{className:"m-0 text-muted text-center"},"Tidak ada persyaratan"))))),i.a.createElement(Y.a,null,i.a.createElement(z.a,{color:"success",onClick:this.save,outline:!0},"Simpan"))))}}]),t}(c.Component),W=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.name),i.a.createElement("td",null,i.a.createElement("input",{type:"checkbox",onChange:function(){return e.checkClicked(e)},value:!e.required,checked:e.required})),i.a.createElement("td",null,i.a.createElement(z.a,{onClick:function(){return e.removeReq(e)},color:"danger",size:"sm",outline:!0},"Hapus")))},$=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,name:"",requirements:{rows:[],count:1},page:1,offset:0,limit:10,totalPage:1,submitting:!1,requirement:{name:""},edit:!1,loading:!1},a.open=function(){a.setState({open:!0},a.getList)},a.getList=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props.models.Requirement,n=a.state,r=n.offset,l=n.limit;e&&a.setState({loading:!0}),t.collection({limit:l,offset:r}).then(function(e){var t=Math.ceil(e.count/l);a.setState({requirements:e,totalPage:t,loading:!1})})},a.componentDidMount=function(){a.getList(!0)},a.cancel=function(){a.setState({requirement:{name:""},edit:!1,name:""})},a.close=function(){a.setState({open:!1})},a.edit=function(e){return a.setState({edit:!0,requirement:e,name:e.name})},a.delete=function(e){e.delete().then(function(){return a.setState({requirement:{name:""},edit:!1},function(){return a.getList()})})},a.update=function(){var e=a.state,t=e.requirement,n=e.name;t.update({name:n}).then(function(){return a.setState({name:"",requirement:{name:""},edit:!1},function(){return a.getList()})})},a.addRequirement=function(e){e.preventDefault();var t=a.props.models.Requirement,n=a.state.name;return a.setState({submitting:!0},function(){t.create({name:n}).then(function(){a.setState({name:"",submitting:!1},function(){return a.getList()})})}),!1},a.next=function(){var e=a.state,t=e.totalPage,n=e.offset,r=e.limit,l=e.page;l=l<t?l+1:t,n=parseInt((l-1)*r),a.setState({offset:n,page:l},function(){return a.getList()})},a.prev=function(){var e=a.state,t=e.limit,n=e.page,r=e.totalPage;n=n>1?n-1:1;var l=parseInt((n-1)*t);a.setState({offset:l,totalPage:r,page:n},function(){return a.getList()})},a.limitChange=function(e){e.target.value>=1&&a.setState({limit:e.target.value<1?1:e.target.value,offset:0,page:1},function(){return a.getList(!0)})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state.totalPage;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{action:"",className:"px-2",method:"post"},i.a.createElement(U.a,{size:"sm"},i.a.createElement(T.a,{readOnly:this.state.submitting,placeholder:"Nama Dokumen",onChange:function(t){return e.setState({name:t.target.value})},value:this.state.submitting?"Menambah Dokumen":this.state.name,name:"name"}),i.a.createElement(R.a,{addonType:"append"},this.state.edit&&i.a.createElement(z.a,{color:"danger",type:"button",outline:!0,onClick:this.cancel},"Cancel"),this.state.edit&&i.a.createElement(z.a,{type:"submit",color:"success",outline:!0,onClick:this.update},"Simpan"),!this.state.edit&&i.a.createElement(z.a,{type:"submit",color:"success",outline:!0,onClick:this.addRequirement},"Tambah")))),i.a.createElement(p.a,{className:"border-0 my-2"},i.a.createElement(I.a,{striped:!0,hover:!0,bordered:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No."),i.a.createElement("th",null,"Nama"),i.a.createElement("th",null,"Edit/Hapus"))),i.a.createElement("tbody",null,this.state.loading?i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},i.a.createElement("p",{className:"text-muted m-0 text-center"},i.a.createElement(j.a,{size:"sm",color:"secondary"})," Loading"))):this.state.requirements.rows.length>0?this.state.requirements.rows.map(function(t,a){return i.a.createElement(V,{key:a,edit:e.edit,deleteRequirement:e.delete,req:t,index:a+1+e.state.offset})}):i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},i.a.createElement("p",{className:"text-muted m-0 text-center"},"Belum Ada Dokumen Persyaratan"))))),i.a.createElement(J.a,null,i.a.createElement(u.a,{noGutters:!0},i.a.createElement(d.a,{sm:"7"},i.a.createElement(K.a,{size:"sm"},i.a.createElement(z.a,{disabled:0===t||1===t,onClick:this.prev,color:"primary"},"Prev"),i.a.createElement(z.a,{disabled:!0,color:"light"},"".concat(this.state.page,"/").concat(this.state.totalPage>0?this.state.totalPage:1)),i.a.createElement(z.a,{disabled:0===t||1===t,onClick:this.next,color:"primary"},"Next"))),i.a.createElement(d.a,null,i.a.createElement(U.a,null,i.a.createElement(T.a,{value:this.state.limit,onChange:this.limitChange,type:"number"}),i.a.createElement(R.a,{addonType:"append"},"Limit/Halaman")))))))}}]),t}(c.Component),V=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.index),i.a.createElement("td",null,e.req.name),i.a.createElement("td",null,i.a.createElement("div",{className:"btn-group btn-group-sm"},i.a.createElement("button",{onClick:function(){return e.edit(e.req)},className:"btn btn-warning"},"Edit"),i.a.createElement("button",{onClick:function(){return e.deleteRequirement(e.req)},className:"btn btn-danger"},"Hapus"))))},X=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={purposes:{rows:[],count:1},requirements:{requirements:[]},modal:!1,limit:10,offset:0,page:1,totalPage:1,loading:!1},a.componentDidMount=function(){document.title="Dokumen & Tujuan",a.getPurpose(!0)},a.getPurpose=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props.models.Purpose,n=a.state,r=n.limit,l=n.offset;e&&a.setState({loading:!0}),t.collection({limit:r,offset:l,distinct:!0}).then(function(e){var t=Math.ceil(e.count/a.state.limit);a.setState({purposes:e,totalPage:t,loading:!1})})},a.addPurpose=function(e,t){a.props.models.Purpose.create(e).then(function(){a.addModal.close(),a.getPurpose(),t()}).catch(function(e){return alert(e)})},a.deletePurpose=function(e){e.delete().then(function(){a.getPurpose()})},a.editPurpose=function(e){return a.setState({requirements:e},function(){return a.editModal.open()})},a.next=function(){var e=a.state,t=e.totalPage,n=e.offset,r=e.limit,l=e.page;l=l<t?l+1:t,n=parseInt((l-1)*r),a.setState({offset:n,page:l},function(){return a.getPurpose()})},a.prev=function(){var e=a.state,t=e.limit,n=e.page,r=e.totalPage;n=n>1?n-1:1;var l=parseInt((n-1)*t);a.setState({offset:l,totalPage:r,page:n},function(){return a.getPurpose()})},a.limitChange=function(e){e.target.value>=1&&a.setState({limit:e.target.value<1?1:e.target.value,page:1,offset:0},function(){return a.getPurpose(!0)})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state.totalPage;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-body"},i.a.createElement("h5",{className:"m-0"},"Dokumen & Tujuan"),i.a.createElement("hr",null)),i.a.createElement(u.a,{noGutters:!0},i.a.createElement(d.a,{md:"6",className:"pr-1"},i.a.createElement("button",{className:"btn btn-primary btn-sm mx-2",onClick:function(){return e.addModal.open()}},"Tambah tujuan"),i.a.createElement(p.a,{className:"my-2 border-0"},i.a.createElement("table",{className:"table table-striped table-bordered"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No."),i.a.createElement("th",null,"Tujuan"),i.a.createElement("th",null,"Lihat Dok/Edit/Delete"))),i.a.createElement("tbody",null,this.state.loading?i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3,className:"text-center"},i.a.createElement("p",{className:"text-muted small text-center m-0"},i.a.createElement(j.a,{size:"sm",color:"secondary"}),"\xa0Loading"))):this.state.purposes.rows.length>0?this.state.purposes.rows.map(function(t,a){return i.a.createElement(Z,{key:a,edit:e.editPurpose,index:a+1+e.state.offset,requirement:function(t){return e.setState({requirements:t,modal:!0})},onClick:e.deletePurpose,purpose:t})}):i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3,className:"text-center"},i.a.createElement("p",{className:"text-muted small text-center m-0"},"Belum ada Tujuan\xa0 ",i.a.createElement(z.a,{color:"success",size:"sm",outline:!0,onClick:function(){return e.addModal.open()}},"Tambah tujuan")))))),i.a.createElement(J.a,null,i.a.createElement(u.a,{noGutters:!0},i.a.createElement(d.a,{sm:"7"},i.a.createElement(K.a,{size:"sm"},i.a.createElement(z.a,{disabled:0===t||1===t,onClick:this.prev,color:"primary"},"Prev"),i.a.createElement(z.a,{color:"light",disabled:!0},this.state.page,"/",0===this.state.totalPage?1:this.state.totalPage),i.a.createElement(z.a,{disabled:0===t||1===t,onClick:this.next,color:"primary"},"Next"))),i.a.createElement(d.a,null,i.a.createElement(U.a,{size:"sm"},i.a.createElement(T.a,{value:this.state.limit,onChange:this.limitChange,type:"number"}),i.a.createElement(R.a,{addonType:"append"},"Limit/Halaman"))))))),i.a.createElement(d.a,{md:"6",className:"pl-1"},i.a.createElement($,{models:this.props.models}))),i.a.createElement("div",{className:"card-body"}),i.a.createElement(A,{add:this.addPurpose,models:this.props.models,ref:function(t){return e.addModal=t}}),i.a.createElement(B,{ref:function(t){return e.requirementModal=t},models:this.props.models}),i.a.createElement(ee,{requirements:this.state.requirements,close:function(){return e.setState({modal:!1})},open:this.state.modal}),i.a.createElement(G,{models:this.props.models,reload:this.getPurpose,ref:function(t){return e.editModal=t},requirements:this.state.requirements}))}}]),t}(c.Component),Z=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.index),i.a.createElement("td",null,e.purpose.name),i.a.createElement("td",null,i.a.createElement("div",{className:"btn-group btn-group-sm"},i.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.requirement(e.purpose)}},i.a.createElement(L.a,null)),i.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.edit(e.purpose)}},i.a.createElement(L.i,null)),i.a.createElement("button",{onClick:function(){return e.onClick(e.purpose)},className:"btn btn-danger"},i.a.createElement(L.o,null)))))},ee=function(e){return i.a.createElement(C.a,{toggle:e.close,isOpen:e.open},i.a.createElement(w.a,{toggle:e.close,className:"bg-primary text-white"},e.requirements.name),i.a.createElement(I.a,{bordered:!0,hover:!0,striped:!0,responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Persyaratan"),i.a.createElement("th",null,"Opsional"))),i.a.createElement("tbody",null,e.requirements.requirements.length>0?e.requirements.requirements.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,e.name),i.a.createElement("td",null,e.required?"Penting":"Opsional"))}):i.a.createElement("tr",null,i.a.createElement("td",{colSpan:2},i.a.createElement("p",{className:"m-0 text-muted text-center"},"Tidak ada persyaratan"))))),i.a.createElement(Y.a,null,i.a.createElement("button",{className:"btn btn-outline-dark btn-sm rounded-pill",onClick:e.close},"Tutup")))},te=a(39),ae=a.n(te),ne=a(44),re=a(553),le=a(408),se=a.n(le),oe=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={openModal:!1,date:"",open:"08:00:00",close:"16:00:00",break_start:"13:00:00",break_end:"14:00:00",tolerance:5,processing_time:5,operator:5,dates:[],success:!1,loading:!1,error:!1,purposes:[]},a.open=function(){a.setState({openModal:!0})},a.calculateTotal=function(e){for(var t=e.tolerance,a=e.processing_time,n=e.start_time,r=e.end_time,l=e.break_start,s=e.break_end,o=e.operator,c=parseInt(t)+parseInt(a),i={h:n.split(":")[0],m:n.split(":")[1],s:"00"},m={h:r.split(":")[0],m:r.split(":")[1],s:"00"},u={h:l.split(":")[0],m:l.split(":")[1],s:"00"},d={h:s.split(":")[0],m:s.split(":")[1],s:"00"},p=new Date,h=new Date(p.getFullYear(),p.getMonth(),p.getDate(),i.h,i.m,i.s),g=new Date(p.getFullYear(),p.getMonth(),p.getDate(),m.h,m.m,m.s),E=new Date(p.getFullYear(),p.getMonth(),p.getDate(),u.h,u.m,u.s),f=new Date(p.getFullYear(),p.getMonth(),p.getDate(),d.h,d.m,d.s),b=0;h.getTime()<g.getTime();)h.setMinutes(h.getMinutes()+c),(h.getTime()<E.getTime()||h.getTime()>f.getTime())&&b++;return b*o},a.onChange=function(e){a.setState(Object(S.a)({},e.target.name,e.target.value))},a.close=function(){return a.setState({openModal:!1})},a.save=function(e){e.preventDefault();var t=a.props.models,n=t.Schedule,r=t.Limitation,l=a.state,s=l.name,o=l.date,c=l.break_end,i=l.break_start,m=l.open,u=l.close,d=l.tolerance,p=l.processing_time,h=l.operator,g=l.purposes;a.setState({loading:!0}),n.create({name:s,date:f()(o[0]).format("YYYY-MM-DD"),break_end:c,break_start:i,open:m,close:u,tolerance:d,processing_time:p,operator:h}).then(function(e){a.setState({success:!0,loading:!1,date:""}),a.getDates(),a.props.get(),g.forEach(function(){var t=Object(ne.a)(ae.a.mark(function t(a){var n,l,s;return ae.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.limit,l=a.id,t.prev=1,t.next=4,r.create({limit:n,schedule_id:e.id,purpose_id:l});case 4:s=t.sent,console.log(s),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}())}).catch(function(e){console.log(e),a.setState({error:!0,loading:!1})})},a.getDates=function(){a.props.models.Schedule.collection({limit:9999,offset:0}).then(function(e){var t=e.rows.map(function(e){return e.date});a.setState({dates:t,date:t[0]},function(){return a.getPurpose()})}).catch(function(e){return alert(e)})},a.getPurpose=function(){var e=a.props.models.Purpose,t=a.state,n=t.tolerance,r=t.break_end,l=t.break_start,s=t.operator,o=t.processing_time,c=t.open,i=t.close;a.calculateTotal({tolerance:n,break_end:r,break_start:l,start_time:c,end_time:i,operator:s,processing_time:o});e.collection({limit:999,offset:0}).then(function(e){a.setState({purposes:e.rows.map(function(e){return{id:e.id,name:e.name,limit:0}})})}).catch(function(e){return alert(e)})},a.closeAlert=function(){return a.setState({success:!1})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.getDates()}},{key:"render",value:function(){var e=this,t={minDate:f()().format("Y-MM-DD"),disable:this.state.dates},a=this.state,n=a.tolerance,r=a.break_end,l=a.break_start,s=a.operator,o=a.processing_time,c=a.open,m=a.close,p=a.purposes;return i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{size:"lg",className:"setting-modal",isOpen:this.state.openModal},i.a.createElement(w.a,{toggle:this.close,className:"bg-success text-white"},"Tambah Jadwal"),i.a.createElement(q.a,null,i.a.createElement(u.a,null,i.a.createElement(d.a,{md:"6"},i.a.createElement("label",{htmlFor:"",className:"my-2"},"Tanggal"),i.a.createElement(k.a,{options:t,className:"form-control",placeholder:"Tanggal",onChange:function(t){return e.setState({date:t})},value:this.state.date}),i.a.createElement("label",{htmlFor:"",className:"my-2"},"Waktu Penanganan"),i.a.createElement(T.a,{type:"number",disabled:this.state.loading,value:this.state.processing_time,name:"processing_time",onChange:this.onChange}),i.a.createElement("label",{htmlFor:"",className:"my-2"},"Jumlah Operator"),i.a.createElement(T.a,{type:"number",disabled:this.state.loading,value:this.state.operator,name:"operator",onChange:this.onChange}),i.a.createElement(U.a,{className:"my-2"},i.a.createElement(R.a,{addonType:"prepend"},"Jam Buka"),i.a.createElement(T.a,{type:"time",disabled:this.state.loading,name:"open",onChange:this.onChange,placeholder:"Jam Buka",value:this.state.open,id:""}),i.a.createElement(R.a,{addonType:"prepend"},"Jam Tutup"),i.a.createElement(T.a,{type:"time",disabled:this.state.loading,name:"close",onChange:this.onChange,placeholder:"Jam Tutup",value:this.state.close,id:""})),i.a.createElement(U.a,{className:"my-2"},i.a.createElement(R.a,{addonType:"prepend"},"Jam Istirahat"),i.a.createElement(T.a,{type:"time",disabled:this.state.loading,name:"break_start",onChange:this.onChange,placeholder:"Jam Istirahat",value:this.state.break_start,id:""}),i.a.createElement(R.a,{addonType:"prepend"},"s/d"),i.a.createElement(T.a,{type:"time",disabled:this.state.loading,name:"break_end",onChange:this.onChange,placeholder:"Jam Kerja",value:this.state.break_end,id:""})),i.a.createElement("label",{htmlFor:"",className:"my-2"},"Toleransi"),i.a.createElement(U.a,{className:"my-2"},i.a.createElement(T.a,{type:"number",disabled:this.state.loading,name:"tolerance",onChange:this.onChange,placeholder:"Jam Tutup",value:this.state.tolerance,id:""}),i.a.createElement(R.a,{addonType:"append"},"Menit")),i.a.createElement(re.a,null,"Kuota Pengantri"),i.a.createElement(U.a,null,i.a.createElement(T.a,{readOnly:!0,value:this.calculateTotal({tolerance:n,break_end:r,break_start:l,start_time:c,end_time:m,operator:s,processing_time:o})}),i.a.createElement(R.a,{addonType:"append"},"Orang")),i.a.createElement("hr",null),i.a.createElement(D.a,{color:"info"},"Waktu pengerjaan + waktu toleransi harus habis dibagi 60"),i.a.createElement(D.a,{color:"success",isOpen:this.state.success,toggle:this.closeAlert},"Tanggal berhasil ditambahkan"),i.a.createElement(D.a,{color:"info",isOpen:this.state.loading},i.a.createElement(j.a,{color:"info",size:"sm"}),"\xa0Loading"),i.a.createElement(D.a,{color:"danger",isOpen:this.state.error},"Gagal menambah tanggal")),i.a.createElement(d.a,{md:"6"},i.a.createElement("p",null,"Limit pengantri per tujuan"),p.map(function(t){return i.a.createElement(U.a,{style:{margin:"5px 0"},key:t.id},i.a.createElement(R.a,{addonType:"prepend"},i.a.createElement(se.a,null,t.name)),i.a.createElement(T.a,{type:"number",value:t.limit,onChange:function(a){var i=a.target.value,u=e.calculateTotal({tolerance:n,break_end:r,break_start:l,start_time:c,end_time:m,operator:s,processing_time:o});t.limit=i>u?parseInt(u):parseInt(i),e.setState({purposes:p})}}))})))),i.a.createElement(Y.a,null,i.a.createElement(z.a,{color:"success",onClick:this.save,outline:!0},i.a.createElement(L.j,null),"\xa0Simpan"),i.a.createElement(z.a,{color:"danger",onClick:this.close,outline:!0},i.a.createElement(L.n,null),"\xa0Tutup"))))}}]),t}(c.Component),ce=a(560);f.a.locale("id");var ie=function(e){return i.a.createElement("svg",{className:"card-img-top",width:"100%",height:"130",textAnchor:"middle",alignmentBaseline:"middle"},i.a.createElement("rect",{fill:"#e74c3c",width:"100%",height:"100%"}),i.a.createElement("text",{x:"50%",y:"60%",fontSize:"50pt",fill:"white"},f()(e.date).format("DD")),i.a.createElement("text",{x:"50%",y:"80%",fontSize:"20pt",fill:"white"},f()(e.date).format("MMMM")))},me=function(e){return i.a.createElement("div",{className:"col-md-3 my-2"},i.a.createElement(p.a,{className:"border-0 shadow-sm"},i.a.createElement(ie,e.setting),i.a.createElement(h.a,null,i.a.createElement(ce.a,{target:"#plus",title:"Min"},"Tambah Operator"),i.a.createElement(z.a,{block:!0,color:"success",onClick:function(){return e.manageOperator(e.setting)},id:"plus"},i.a.createElement(_.q,{color:"white"}))),i.a.createElement(I.a,{responsive:!0,bordered:!0,striped:!0},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Operator"),i.a.createElement("td",null,i.a.createElement("b",null,e.setting.operator)," orang")),i.a.createElement("tr",null,i.a.createElement("td",null,"Jam Buka"),i.a.createElement("td",null,e.setting.open)),i.a.createElement("tr",null,i.a.createElement("td",null,"Jam Tutup"),i.a.createElement("td",null,e.setting.close)),i.a.createElement("tr",null,i.a.createElement("td",null,"Lama Penanganan"),i.a.createElement("td",null,e.setting.processing_time," menit")),i.a.createElement("tr",null,i.a.createElement("td",null,"Jam Istirahat"),i.a.createElement("td",null,e.setting.break_start)),i.a.createElement("tr",null,i.a.createElement("td",null,"Jam Selesai Istirahat"),i.a.createElement("td",null,e.setting.break_end)),i.a.createElement("tr",null,i.a.createElement("td",null,"Toleransi"),i.a.createElement("td",null,e.setting.tolerance," menit")),i.a.createElement("tr",null,i.a.createElement("td",null,"Kuota"),i.a.createElement("td",null,e.quota," orang")))),i.a.createElement(J.a,null,i.a.createElement(ce.a,{target:"#edit"},"Edit Limit Pengantri"),i.a.createElement(ce.a,{target:"#hapus"},"Hapus Settingan"),i.a.createElement(z.a,{id:"edit",onClick:function(){return e.editQuota(e.setting)},color:"warning",size:"sm",style:{margin:"0 5px"}},i.a.createElement(_.m,null)),i.a.createElement(z.a,{id:"hapus",onClick:function(){return e.deleteSetting(e.setting)},color:"danger",size:"sm",style:{margin:"0 5px"}},i.a.createElement(_.p,null)))))},ue=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={openModal:!1,date:new Date,open:"08:00",close:"16:00",break_start:"13:00",break_end:"14:00",tolerance:1},a.componentDidMount=function(){var e=a.props.lastDate,t=f()(e).add(1,"day");a.setState({date:t})},a.onChange=function(e){a.setState(Object(S.a)({},e.target.name,e.target.value))},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"col-md-3 my-2"},i.a.createElement(p.a,{className:"border-0 shadow-sm"},i.a.createElement(ie,this.state),i.a.createElement(I.a,{bordered:!0,striped:!0},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Jam Buka"),i.a.createElement("td",null,i.a.createElement(T.a,{name:"open",onChange:this.onChange,value:this.state.open,bsSize:"sm",type:"time"}))),i.a.createElement("tr",null,i.a.createElement("td",null,"Jam Tutup"),i.a.createElement("td",null,i.a.createElement(T.a,{name:"close",onChange:this.onChange,value:this.state.close,type:"time"})))))))}}]),t}(c.Component),de=a(538),pe=a(306),he=a(407);function ge(e){var t=e.open,a=e.close,n=e.schedule,r=e.models.Limitation,l=Object(c.useState)([{purpose:{name:""},limit:0,id:0}]),s=Object(pe.a)(l,2),o=s[0],m=s[1],u=Object(c.useState)(0),d=Object(pe.a)(u,2),p=d[0],h=d[1],g=Object(c.useState)(!1),E=Object(pe.a)(g,2),f=E[0],b=E[1];Object(c.useEffect)(function(){m(n.limitations)},[n]);return Object(c.useEffect)(function(){p===o.length&&(b(!0),setTimeout(function(){h(0),b(!1),a()},5e3))},[p]),i.a.createElement(C.a,{size:"lg",toggle:a,isOpen:t},i.a.createElement(w.a,{toggle:a,title:"Edit Limit Pengantri"},"Edit Limit Pengantri"),i.a.createElement(q.a,null,f&&i.a.createElement(D.a,{color:"success"},"Limit pengantri berhasil di-update"),o.map(function(e,t){return i.a.createElement(U.a,{key:e.id,style:{margin:"5px 0"}},i.a.createElement(R.a,{addonType:"prepend"},i.a.createElement(he.a,null,e.purpose.name)),i.a.createElement(T.a,{type:"number",onChange:function(e){o[t].limit=e.target.value,m(Object(de.a)(o))},value:e.limit}))})),i.a.createElement(Y.a,null,i.a.createElement(z.a,{color:"primary",onClick:function(){o.forEach(function(e,t){r.single(e.id).then(function(a){a.update({limit:e.limit}).then(function(e){console.log(e),h(t+1)}).catch(function(e){return alert(e)})}).catch(function(e){return alert(e)})})}},"Update")))}var Ee=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={schedules:{rows:[],count:1},modal:!1,schedule:{date:new Date,limitations:[]},addSchedule:!1,totalPage:1,page:1,offset:0,limit:4,loading:!1,editQuota:!1},a.getSchedule=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props.models.Schedule,n=a.state,r=n.totalPage,l=n.offset,s=n.limit;e&&a.setState({loading:!0}),t.collection({limit:s,offset:l,order:[["date","asc"]],include:[{model:"Limitation",attributes:["limit","purpose_id","id"],include:[{model:"Purpose",attributes:["name"]}]}],attributes:["date","processing_time","tolerance","break_start","break_end","operator","open","close"],distinct:!0}).then(function(e){r=Math.ceil(e.count/s),a.setState({schedules:e,totalPage:r,loading:!1})})},a.componentDidMount=function(){a.getSchedule(!0)},a.delete=function(e){e.delete().then(function(){a.setState({schedule:{},modal:!1}),a.getSchedule()})},a.next=function(){var e=a.state,t=e.totalPage,n=e.offset,r=e.limit,l=e.page;l=l<t?l+1:t,n=parseInt((l-1)*r),a.setState({offset:n,page:l},function(){return a.getSchedule()})},a.prev=function(){var e=a.state,t=e.limit,n=e.page,r=e.totalPage;n=n>1?n-1:1;var l=parseInt((n-1)*t);a.setState({offset:l,totalPage:r,page:n},function(){return a.getSchedule()})},a.first=function(){a.setState({offset:0,page:1},function(){return a.getSchedule()})},a.last=function(){var e=a.state,t=e.totalPage,n=e.limit,r=parseInt((t-1)*n);a.setState({offset:r,page:t},function(){return a.getSchedule()})},a.manageOperator=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add";if("add"===t){var n=e.operator,r=e.date,l=e.open,s=e.close,o=e.tolerance,c=e.processing_time,i=e.break_end,m=e.break_start;e.update({operator:n+1,date:r,open:l,close:s,tolerance:o,processing_time:c,break_end:i,break_start:m}).then(function(e){console.log(e),a.getSchedule()}).catch(function(e){return console.log(e)})}else if("subtract"===t){var u=e.operator,d=e.date,p=e.open,h=e.close,g=e.tolerance,E=e.processing_time,f=e.break_end,b=e.break_start;e.update({operator:1===u?1:u-1,date:d,open:p,close:h,tolerance:g,processing_time:E,break_end:f,break_start:b}).then(function(e){console.log(e),a.getSchedule()}).catch(function(e){return console.log(e)})}},a.calculateTotal=function(e){var t=e.tolerance,a=e.processing_time,n=e.start_time,r=e.end_time,l=e.break_start,s=e.break_end,o=e.operator,c=parseInt(t)+parseInt(a),i={h:n.split(":")[0],m:n.split(":")[1],s:"00"},m={h:r.split(":")[0],m:r.split(":")[1],s:"00"},u={h:l.split(":")[0],m:l.split(":")[1],s:"00"},d={h:s.split(":")[0],m:s.split(":")[1],s:"00"},p=new Date,h=new Date(p.getFullYear(),p.getMonth(),p.getDate(),i.h,i.m,i.s),g=new Date(p.getFullYear(),p.getMonth(),p.getDate(),m.h,m.m,m.s),E=new Date(p.getFullYear(),p.getMonth(),p.getDate(),u.h,u.m,u.s),f=new Date(p.getFullYear(),p.getMonth(),p.getDate(),d.h,d.m,d.s);console.log(c);for(var b=0;h.getTime()<g.getTime();)h.setMinutes(h.getMinutes()+c),(h.getTime()<E.getTime()||h.getTime()>f.getTime())&&b++;return b*o},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;document.title="Booking | Pengaturan";var t=this.state,a=t.schedules.rows,n=t.editQuota,r=t.schedule,l=this.props.models;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-body"},i.a.createElement("h4",{className:"m-0"},"Pengaturan"),i.a.createElement("hr",null),i.a.createElement(z.a,{outline:!0,onClick:function(){return e.addSetting.open()},color:"success"},i.a.createElement(_.q,null),"\xa0Tambah Pengaturan"),i.a.createElement("hr",null),i.a.createElement("div",{className:"row"},this.state.loading?i.a.createElement(d.a,{md:"12"},i.a.createElement(D.a,{color:"dark",className:"text-center"},i.a.createElement("h4",{className:"m-0"},i.a.createElement(j.a,null),"\xa0Loading"))):0===a.length?i.a.createElement(d.a,{md:"12"},i.a.createElement(D.a,{color:"info",className:"text-center"},i.a.createElement("h4",{className:"m-0"},"Tidak Ada Pengaturan"))):i.a.createElement(i.a.Fragment,null),a.map(function(t,a){return i.a.createElement(me,{quota:e.calculateTotal({tolerance:t.tolerance,start_time:t.open,end_time:t.close,break_end:t.break_end,break_start:t.break_start,operator:t.operator,processing_time:t.processing_time}),manageOperator:e.manageOperator,editQuota:function(t){return e.setState({schedule:t,editQuota:!0})},deleteSetting:function(t){return e.setState({schedule:t,modal:!0})},key:a,setting:t})}),this.state.addSchedule&&i.a.createElement(ue,{lastDate:a[a.length-1].date})),i.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center my-3"},this.state.totalPage>0&&i.a.createElement(K.a,{size:"sm"},i.a.createElement(z.a,{disabled:this.state.loading,outline:!0,onClick:this.first,color:"primary"},"First"),i.a.createElement(z.a,{disabled:this.state.loading,outline:!0,onClick:this.prev,color:"dark"},"Prev"),i.a.createElement(z.a,{color:"light",disabled:!0},"Halaman ",this.state.page,"/",this.state.totalPage),i.a.createElement(z.a,{disabled:this.state.loading,outline:!0,onClick:this.next,color:"dark"},"Next"),i.a.createElement(z.a,{disabled:this.state.loading,outline:!0,onClick:this.last,color:"primary"},"Last")))),i.a.createElement(oe,{get:this.getSchedule,ref:function(t){return e.addSetting=t},models:this.props.models}),i.a.createElement(fe,{schedule:this.state.schedule,delete:function(t){return e.delete(t)},isOpen:this.state.modal,close:function(){return e.setState({modal:!1})}}),Object.values(r).length>2&&i.a.createElement(ge,{open:n,schedule:r,models:l,close:function(){return e.setState({schedule:{},editQuota:!1})}}))}}]),t}(c.Component),fe=function(e){return i.a.createElement(C.a,{isOpen:e.isOpen},i.a.createElement(w.a,{className:"bg-danger",toggle:e.close}),i.a.createElement(q.a,null,i.a.createElement("h5",{className:"text-center"},"Apakah Anda yakin ingin menghapus penganturan ini?"),i.a.createElement("div",{className:"row my-3"},i.a.createElement("div",{className:"col-md-6"},i.a.createElement(z.a,{color:"danger",onClick:function(){return e.delete(e.schedule)},block:!0},"Ya")),i.a.createElement("div",{className:"col-md-6"},i.a.createElement(z.a,{color:"light",onClick:e.close,block:!0},"Tidak")))))},be=a(71),ve=a.n(be),ye=a(554),ke=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,preview:!1,img:"",documents:[],name:"",loading:!1,error:!1},a.getDocuments=function(){var e=a.props,t=e.models.Queue,n=e.id;a.setState({loading:!0}),t.single(n,{include:[{model:"Document",attributes:["name","id","data"]}],attributes:["id","name"]}).then(function(e){var t=e.name,n=e.documents;return a.setState({name:t,documents:n,loading:!1,error:!1})}).catch(function(e){a.setState({error:!0})})},a.open=function(){return a.setState({open:!0},a.getDocuments)},a.close=function(){return a.setState({open:!1})},a.preview=function(e){return a.setState({img:e,preview:!0})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(C.a,{size:"lg",modalClassName:"modal-preview",toggle:this.close,isOpen:this.state.open},i.a.createElement(w.a,{className:this.state.loading?"bg-white text-dark":"bg-primary text-white",toggle:this.close},this.state.loading?"Loading...":"Lihat dokumen ".concat(this.state.name)),i.a.createElement(q.a,null,!this.state.loading&&0===this.state.documents.length&&i.a.createElement(p.a,{color:"info"},i.a.createElement(h.a,{className:"text-center text-white"},"Tidak ada dokumen yang di-upload")),i.a.createElement("div",{className:"row"},!this.state.loading&&this.state.documents.map(function(t){return i.a.createElement(Ne,Object.assign({preview:e.preview},t,{key:t.id}))})),this.state.loading&&i.a.createElement(p.a,{className:"border-0 shadow"},i.a.createElement(h.a,null,i.a.createElement(j.a,{color:"success",size:"sm"}),"\xa0Loading")),this.state.error&&i.a.createElement(p.a,{color:"danger",className:"border-0 text-white"},i.a.createElement(h.a,null,"Terjadi error. Silahkan tutup jendela ini dan coba buka kembali")),i.a.createElement(C.a,{size:"lg",toggle:function(){return e.setState({preview:!1,img:""})},isOpen:this.state.preview},i.a.createElement(q.a,{className:"p-0 overflow-hidden"},i.a.createElement("img",{src:this.state.img,alt:"",className:"w-100"})))))}}]),t}(c.Component),Ne=function(e){return i.a.createElement("div",{className:"col-md-6 my-2"},i.a.createElement(p.a,null,i.a.createElement(ye.a,{onClick:function(){return e.preview(e.data)},top:!0,src:e.data}),i.a.createElement(h.a,null,e.name)))},Se=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={queues:{count:1,rows:[]},user:{name:"",id:"",type:""},loading:!1,id:0,limit:25,offset:0,totalPage:1,page:1},a.getQueues=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=a.props.models.Queue,n=a.state,r=n.totalPage,l=n.limit,s=n.offset;e&&a.setState({loading:!0}),t.collection({limit:l,offset:s,include:[{model:"Purpose",attributes:["name","id"]}],order:[["time","asc"],["id","asc"]],where:{date:f()().format("YYYY-MM-DD"),status:"Belum Datang"}}).then(function(e){var t=ve.a.groupBy(e.rows,"time");r=Math.ceil(e.count/l),a.setState({queues:{count:e.count,rows:t},totalPage:r,loading:!1})})},a.next=function(){var e=a.state,t=e.totalPage,n=e.offset,r=e.limit,l=e.page;l=l<t?l+1:t,n=parseInt((l-1)*r),a.setState({offset:n,page:l},function(){return a.getQueues()})},a.prev=function(){var e=a.state,t=e.limit,n=e.page,r=e.totalPage;n=n>1?n-1:1;var l=parseInt((n-1)*t);a.setState({offset:l,totalPage:r,page:n},function(){return a.getQueues()})},a.componentDidMount=function(){a.getQueues(!0),f.a.locale("id");var e=a.props,t=e.socket,n=e.provider;document.title="Antrian Hari Ini",n.get().then(function(e){return a.setState({user:e},function(){document.title="".concat(a.state.user.name," | Antrian Hari Ini")})}),t.on("UPDATE_LIST",function(){return a.getQueues(!1)}),t.on("NEW_QUEUE",function(){return a.getQueues(!1)}),t.on("QUEUE_CALLED",function(){return a.getQueues(!1)}),t.on("QUEUE_ARRIVED",function(){return a.getQueues(!1)})},a.updateQueue=function(e,t){e.update({called:t}).then(function(){return a.getQueues(!1)})},a.updateStatus=function(e,t){e.update({status:t}).then(function(){return a.getQueues()})},a.preview=function(e){return a.setState({id:e},function(){return a.previewDocs.open()})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return"administrator"===this.state.type?i.a.createElement(m.a,{to:"/dashboard/main"}):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-body"},i.a.createElement("h5",{className:"m-0"},"Antrian"),i.a.createElement("hr",null),this.state.loading&&i.a.createElement(p.a,{className:"bg-dark border-0 shadow text-white"},i.a.createElement(h.a,null,i.a.createElement("h4",{className:"text-center m-0"},i.a.createElement(j.a,{color:"light"}),"\xa0Loading"))),0===Object.keys(this.state.queues.rows).length&&!this.state.loading&&i.a.createElement(p.a,{className:"text-white bg-dark border-0 shadow-sm"},i.a.createElement(h.a,null,i.a.createElement("h5",{className:"text-center m-0"},"Tidak ada antrian hari ini"))),!this.state.loading&&Object.keys(this.state.queues.rows).sort().map(function(t,a){return i.a.createElement(p.a,{className:"my-2 bg-dark text-white border-0 shadow",key:a},i.a.createElement(h.a,null,i.a.createElement("h5",{className:"m-0"},t)),i.a.createElement(I.a,{size:"sm",responsive:!0,dark:!0,className:"text-white",hover:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"pl-3"},"No. antrian"),i.a.createElement("th",null,"Nama"),i.a.createElement("th",null,"Tujuan"),i.a.createElement("th",null,"Tanggal - Jam"),i.a.createElement("th",null,"NIK"),i.a.createElement("th",null,"No. Telp"),i.a.createElement("th",null,"Aksi"))),i.a.createElement("tbody",null,i.a.createElement(i.a.Fragment,{key:a},e.state.queues.rows[t].map(function(a,n){return i.a.createElement(Ce,{updateStatus:e.updateStatus,data:a,user:e.state.user,onClick:e.updateQueue,q:t,rows:e.state.queues.rows,previewDocuments:e.preview,index:n,key:n})})))))}),i.a.createElement("hr",null),this.state.totalPage>0&&i.a.createElement(K.a,{size:"sm"},i.a.createElement(z.a,{color:"primary",disabled:1===this.state.page,onClick:this.prev},"Prev"),i.a.createElement(z.a,{color:"light",disabled:!0},this.state.page,"/",this.state.totalPage),i.a.createElement(z.a,{color:"primary",disabled:1===this.state.totalPage,onClick:this.next},"Next"))),i.a.createElement(ke,{ref:function(t){return e.previewDocs=t},models:this.props.models,id:this.state.id}))}}]),t}(c.Component),Ce=function(e){return i.a.createElement("tr",null,i.a.createElement(i.a.Fragment,null,i.a.createElement("td",{className:"pl-3"},e.data.queue_number),i.a.createElement("td",null,e.data.name.toUpperCase()),i.a.createElement("td",null,e.data.purpose.name),i.a.createElement("td",null,f()(e.data.date).format("DD MMMM YYYY")," - ",e.data.time),i.a.createElement("td",null,e.data.nik),i.a.createElement("td",null,e.data.phone),i.a.createElement("td",null,i.a.createElement(K.a,{size:"sm"},i.a.createElement(z.a,{onClick:function(){return e.previewDocuments(e.data.id)},id:"document".concat(e.data.id),size:"sm",color:"light"},i.a.createElement(_.g,null)),i.a.createElement(ce.a,{placement:"left-start",target:"document".concat(e.data.id)},"Dokumen ",e.data.name),0===e.data.called&&i.a.createElement(i.a.Fragment,null,i.a.createElement(z.a,{id:"call".concat(e.data.id),onClick:function(){return e.onClick(e.data,e.user.id)},color:"primary",size:"sm"},i.a.createElement(_.e,null)),i.a.createElement(ce.a,{placement:"left",target:"call".concat(e.data.id)},"Panggil ",e.data.name)),0!==e.data.called&&e.data.called!==e.user.id&&i.a.createElement(i.a.Fragment,null,i.a.createElement(z.a,{id:"called".concat(e.data.id),size:"sm",color:"secondary"},i.a.createElement(_.e,null)),i.a.createElement(ce.a,{placement:"left",target:"called".concat(e.data.id)},"Sudah dipanggil"))),"\xa0\xa0",0!==e.data.called&&e.data.called===e.user.id&&i.a.createElement(i.a.Fragment,null,i.a.createElement(z.a,{size:"sm",id:"uncheck".concat(e.data.id),className:"rounded-pill",color:"danger",onClick:function(){return e.updateStatus(e.data,"Tidak Datang")}},i.a.createElement(_.s,null)),"\xa0\xa0",i.a.createElement(ce.a,{placement:"left",target:"uncheck".concat(e.data.id)},"Tidak Datang"),i.a.createElement(z.a,Object(S.a)({size:"sm",id:"check".concat(e.data.id),className:"rounded-pill",onClick:function(){return e.updateStatus(e.data,"Datang")},color:"warning"},"size","sm"),i.a.createElement(_.r,null)),"\xa0\xa0",i.a.createElement(ce.a,{placement:"left",target:"check".concat(e.data.id)},"Datang"),i.a.createElement(z.a,Object(S.a)({size:"sm",id:"reset".concat(e.data.id),className:"rounded-pill",onClick:function(){return e.onClick(e.data,0)},color:"dark"},"size","sm"),i.a.createElement(_.o,null)),i.a.createElement(ce.a,{placement:"left",target:"reset".concat(e.data.id)},"Reset")))))},we=a(428),qe=a.n(we),De=qe.a.ExcelFile,je=qe.a.ExcelFile.ExcelSheet,Oe=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={datasets:[{columns:["No","Nama","NIK"],data:[]}]},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(De,{filename:"Laporan Antrian ".concat(new Date),element:i.a.createElement(z.a,{color:"success",size:"sm"},i.a.createElement(L.g,null),"\xa0Export")},i.a.createElement(je,{dataSet:this.props.data,name:"Organization"})))}}]),t}(c.Component),xe=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={tooltips:[{open:!1},{open:!1}],msg:"",limit:10,offset:0,page:1,totalPage:1,queues:{rows:[],count:1},loading:!1,date:[],id:0,order_by:"queue_number",order:"asc",filter:"",purposes:{rows:[],count:1},queue:{name:"",nik:"",queue_number:"",id:null},confirm:!1,export:!1,dataset:[{columns:["No.","NIK","Nama","Nomor Antrian","Jam","Tanggal","Tujuan"],data:[]}],status:"",query:"",searchBy:"name",edit:!1,status_edit:""},a.componentDidMount=function(){document.title="Laporan Antrian",f.a.locale("id"),a.getQueues(!0),a.getPurpose()},a.tooltipToggle=function(){a.setState({tooltips:[{open:!1},{open:!1}]})},a.onHover=function(e){var t=a.state.tooltips;"undefined"!==typeof e.target.name&&(t[parseInt(e.target.name)].open=!0),a.setState({tooltips:t})},a.clearDate=function(){return a.setState({date:[]},function(){return a.getQueues(!0)})},a.getQueues=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&a.setState({loading:!0});var e=a.props.models.Queue,t=a.state,n=t.limit,r=t.offset,l=t.order_by,s=t.order,o=t.filter,c=t.date,i=t.status,m=t.searchBy,u=t.query,d={model:"Purpose",attributes:["name","id"]},p={limit:n,offset:r,include:[d],where:Object(S.a)({},m,{$like:u.length>0?"%".concat(u,"%"):"%%"}),order:[[l,s]]};c.length>0&&Object.assign(p.where,{date:c.length>1?{$between:[f()(c[0]).format("YYYY-MM-DD hh:mm:ss"),f()(c[1]).format("YYYY-MM-DD hh:mm:ss")]}:f()(c[0]).format("YYYY-MM-DD")}),i.length>0&&Object.assign(p.where,{status:i}),""!==o&&Object.assign(d,{where:{id:o}}),e.collection(p).then(function(e){var t=Math.ceil(e.count/n),r=a.state.dataset;r[0].data=e.rows.map(function(e,t){return[{value:"".concat(t+1),style:{border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}}},{value:e.nik,style:{border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}}},{value:e.name,style:{border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}}},{value:e.queue_number,style:{border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}}},{value:e.time,style:{border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}}},{value:e.date,style:{border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}}},{value:e.purpose.name,style:{border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}}}]}),a.setState({loading:!1,queues:e,totalPage:t,dataset:r})}).catch(function(e){return console.log(e)})},a.getPurpose=function(){a.props.models.Purpose.collection({limit:999,offset:0}).then(function(e){a.setState({purposes:e})}).catch(function(e){return alert(e)})},a.next=function(){var e=a.state,t=e.totalPage,n=e.offset,r=e.limit,l=e.page;l=l<t?l+1:t,n=parseInt((l-1)*r),a.setState({offset:n,page:l},function(){return a.getQueues(!0)})},a.prev=function(){var e=a.state,t=e.limit,n=e.page,r=e.totalPage;n=n>1?n-1:1;var l=parseInt((n-1)*t);a.setState({offset:l,totalPage:r,page:n},function(){return a.getQueues(!0)})},a.onLimitChange=function(e){e.target.value>=1&&a.setState({limit:e.target.value<1?1:e.target.value},function(){return a.getQueues(!0)})},a.onDateChange=function(e){return a.setState({date:e},function(){return a.getQueues(!0)})},a.previewDocs=function(e){return a.setState({id:e},function(){return a.preview.open()})},a.order=function(e){e.preventDefault();var t=a.state.order;return"asc"===t?t="desc":"desc"===t&&(t="asc"),a.setState({order:t,order_by:e.target.name},function(){return a.getQueues(!0)}),!1},a.cancelDelete=function(){a.setState({confirm:!1,queue:{name:"",queue_number:"",nik:""}})},a.updateQueueStatus=function(){var e=a.state,t=e.queue,n=e.status_edit;t.update({status:n}).then(function(){return a.setState({queue:{id:null,name:"",queue_number:"",nik:""},edit:!1},a.getQueues)})},a.deleteQueue=function(e){e.delete().then(function(){a.setState({confirm:!1,queue:{name:"",queue_number:"",nik:""}},a.getQueues)})},a.export=function(){return a.setState({export:!0})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state.id;return i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,{className:"border-bottom border-primary"},i.a.createElement("h5",{className:"m-0"},"Laporan"),i.a.createElement("hr",null),i.a.createElement(u.a,{className:"justify-content-between",noGutters:!0},i.a.createElement(d.a,{md:"1"},i.a.createElement(K.a,{size:"sm"},i.a.createElement(z.a,{onClick:this.prev,disabled:0===this.state.totalPage,color:"primary"},i.a.createElement(_.b,null)),i.a.createElement(z.a,{disabled:!0,color:"dark"},"".concat(this.state.page,"/").concat(0===this.state.totalPage?1:this.state.totalPage)),i.a.createElement(z.a,{onClick:this.next,disabled:0===this.state.totalPage,color:"primary"},i.a.createElement(_.c,null)))),!this.state.loading&&i.a.createElement(d.a,{md:"1"},(!this.state.loading||this.state.queues.rows.length>0)&&i.a.createElement(Oe,{data:this.state.dataset})),i.a.createElement(d.a,{md:"3",className:"pr-2"},i.a.createElement(U.a,{size:"sm"},i.a.createElement(R.a,{addonType:"prepend"},i.a.createElement(he.a,null,i.a.createElement(L.h,null),"\xa0Tujuan")),i.a.createElement(T.a,{onChange:function(t){return e.setState({filter:t.target.value},e.getQueues)},value:this.state.filter,type:"select"},i.a.createElement("option",{value:""},"Filter per tujuan"),this.state.purposes.rows.map(function(e){return i.a.createElement("option",{value:e.id,key:e.id},e.name)})))),i.a.createElement(d.a,{md:"3",className:"pr-2"},i.a.createElement(U.a,{size:"sm"},i.a.createElement(k.a,{value:this.state.date,options:{mode:"range",dateFormat:"Y-m-d"},onChange:this.onDateChange,placeholder:"Tanggal",className:"form-control form-control-sm"}),i.a.createElement(R.a,{addonType:"append"},i.a.createElement(z.a,{color:"danger",onClick:this.clearDate},i.a.createElement(L.b,null))))),i.a.createElement(d.a,{md:"3"},i.a.createElement(U.a,{size:"sm"},i.a.createElement(T.a,{value:this.state.query,type:"text",onChange:function(t){return e.setState({query:t.target.value},e.getQueues)},placeholder:"Cari pengantri"}),i.a.createElement(R.a,{addonType:"append"},i.a.createElement(z.a,{color:"success",outline:!0},i.a.createElement(L.k,null))))))),i.a.createElement(Me,{open:this.state.confirm,onDelete:this.deleteQueue,data:this.state.queue,onCancel:this.cancelDelete}),i.a.createElement("div",{className:"table-responsive"},i.a.createElement(I.a,{bordered:!0,hover:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,i.a.createElement("p",{onClick:this.order,name:"queue_number"},"No. Antrian"),i.a.createElement(_e,{orderBy:this.state.order_by,name:"queue_number",order:this.state.order})),i.a.createElement("th",null,i.a.createElement("p",{onClick:this.order,name:"time"},"Jam"),i.a.createElement(_e,{orderBy:this.state.order_by,name:"time",order:this.state.order})),i.a.createElement("th",null,i.a.createElement("p",{onClick:this.order,name:"date"},"Tanggal"),i.a.createElement(_e,{orderBy:this.state.order_by,name:"date",order:this.state.order})),i.a.createElement("th",null,i.a.createElement("p",{onClick:this.order,name:"name"},"Nama"),i.a.createElement(_e,{orderBy:this.state.order_by,name:"name",order:this.state.order})),i.a.createElement("th",null,i.a.createElement("p",{onClick:this.order,name:"phone"},"No. Telp"),i.a.createElement(_e,{orderBy:this.state.order_by,name:"phone",order:this.state.order})),i.a.createElement("th",null,"Tujuan"),i.a.createElement("th",null,i.a.createElement("p",{onClick:this.order,name:"nik"},"NIK"),i.a.createElement(_e,{orderBy:this.state.order_by,name:"nik",order:this.state.order})),i.a.createElement("th",null,i.a.createElement("p",{onClick:this.order,name:"status"},"Status"),i.a.createElement(_e,{orderBy:this.state.order_by,name:"status",order:this.state.order})),i.a.createElement("th",null,"File/Hapus"))),i.a.createElement("tbody",null,0===this.state.queues.rows.length&&!this.state.loading&&i.a.createElement("tr",null,i.a.createElement("td",{className:"text-center text-muted",colSpan:document.getElementsByTagName("th").length},"Belum ada antrian")),this.state.loading&&i.a.createElement("tr",null,i.a.createElement("td",{className:"text-center text-muted",colSpan:document.getElementsByTagName("th").length},i.a.createElement(j.a,{size:"sm",color:"secondary"}),"\xa0Loading")),!this.state.loading&&this.state.queues.rows.map(function(t){return i.a.createElement(Pe,{onClick:e.previewDocs,onDelete:function(t){return e.setState({queue:t,confirm:!0})},data:t,key:t.id,onEdit:function(t){return e.setState({edit:!0,queue:t,status_edit:t.status})},cancelEdit:function(){return e.setState({edit:!1,queue:{id:0}})},edit:e.state.edit,queue:e.state.queue,statusValue:e.state.status_edit,updateQueueStatus:e.updateQueueStatus,onChange:function(t){return e.setState({status_edit:t})}})})))),i.a.createElement(h.a,{className:"border-top border-primary"},i.a.createElement(u.a,{className:"justify-content-between",noGutters:!0},i.a.createElement(d.a,{md:"2"},i.a.createElement(K.a,{size:"sm"},i.a.createElement(z.a,{onClick:this.prev,disabled:0===this.state.totalPage,color:"primary"},i.a.createElement(_.b,null)),i.a.createElement(z.a,{disabled:!0,color:"dark"},"".concat(this.state.page,"/").concat(0===this.state.totalPage?1:this.state.totalPage)),i.a.createElement(z.a,{onClick:this.next,disabled:0===this.state.totalPage,color:"primary"},i.a.createElement(_.c,null)))),!this.state.loading&&i.a.createElement(d.a,null,i.a.createElement("code",null,"Total : ",this.state.queues.count," pendaftar")),!this.state.loading&&i.a.createElement(d.a,{md:"2",className:"pr-1"},i.a.createElement("select",{name:"",value:this.state.status,onChange:function(t){return e.setState({status:t.target.value},function(){return e.getQueues(!0)})},className:"form-control form-control-sm",id:""},i.a.createElement("option",{value:""},"Filter by status"),i.a.createElement("option",{value:"Datang"},"Datang"),i.a.createElement("option",{value:"Tidak Datang"},"Tidak Datang"),i.a.createElement("option",{value:"Belum Datang"},"Belum Datang"))),i.a.createElement(d.a,{md:"2"},i.a.createElement(U.a,{size:"sm"},i.a.createElement(T.a,{value:this.state.limit,onChange:this.onLimitChange,type:"number"}),i.a.createElement(R.a,{addonType:"append"},"Data/Halaman"))))),i.a.createElement(ke,{models:this.props.models,id:t,ref:function(t){return e.preview=t}}))}}]),t}(c.Component),_e=function(e){return e.orderBy===e.name&&"asc"===e.order?i.a.createElement(L.m,null):e.orderBy===e.name&&"desc"===e.order?i.a.createElement(L.l,null):""},Pe=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.data.queue_number),i.a.createElement("td",null,e.data.time),i.a.createElement("td",null,f()(e.data.date).format("DD MMMM YYYY")),i.a.createElement("td",null,e.edit?i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{id:"name".concat(e.data.id),className:"m-0"},e.data.name.toUpperCase().substr(0,4)+"..."),i.a.createElement(ce.a,{target:"name".concat(e.data.id)},"Nama : ",e.data.name.toUpperCase())):i.a.createElement("p",{id:"name".concat(e.data.id),className:"m-0"},e.data.name.toUpperCase())),i.a.createElement("td",null,e.edit?i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{id:"phone".concat(e.data.id),className:"m-0"},e.data.phone.toString().substr(0,4)+"..."),i.a.createElement(ce.a,{target:"phone".concat(e.data.id)},"No. Telp : ",e.data.phone)):i.a.createElement("p",{id:"phone".concat(e.data.id),className:"m-0"},e.data.phone)),i.a.createElement("td",null,e.data.purpose.name),i.a.createElement("td",null,e.edit?i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{id:"nik".concat(e.data.id),className:"m-0"},e.data.nik.toString().substr(0,4)+"..."),i.a.createElement(ce.a,{target:"nik".concat(e.data.id)},"NIK : ",e.data.nik)):i.a.createElement("p",{id:"nik".concat(e.data.id),className:"m-0"},e.data.nik)),i.a.createElement("td",null,e.edit&&e.queue.id===e.data.id?i.a.createElement(U.a,{size:"sm"},i.a.createElement(T.a,{type:"select",bsSize:"sm",value:e.statusValue,onChange:function(t){return e.onChange(t.target.value)}},i.a.createElement("option",{value:"Belum Datang"},"Belum Datang"),i.a.createElement("option",{value:"Tidak Datang"},"Tidak Datang"),i.a.createElement("option",{value:"Datang"},"Datang")),i.a.createElement(R.a,{addonType:"append"},i.a.createElement(z.a,{onClick:e.updateQueueStatus,color:"success"},i.a.createElement(L.c,null)))):e.data.status),i.a.createElement("td",null,e.edit?e.queue.id!==e.data.id?i.a.createElement(i.a.Fragment,null,i.a.createElement(ce.a,{target:"edit-btn".concat(e.data.id)},"Edit status ",e.data.name),i.a.createElement(z.a,{color:"primary",onClick:function(){return e.onEdit(e.data)},className:"rounded-pill",id:"edit-btn".concat(e.data.id),size:"sm"},i.a.createElement(L.e,null)),"\xa0\xa0"):i.a.createElement(i.a.Fragment,null,i.a.createElement(z.a,{color:"danger",className:"rounded-pill",onClick:e.cancelEdit,id:"cancel-btn".concat(e.data.id),size:"sm"},i.a.createElement(L.n,null)),"\xa0\xa0"):i.a.createElement(i.a.Fragment,null,i.a.createElement(ce.a,{target:"edit-btn".concat(e.data.id)},"Edit status ",e.data.name),i.a.createElement(z.a,{color:"primary",onClick:function(){return e.onEdit(e.data)},className:"rounded-pill",id:"edit-btn".concat(e.data.id),size:"sm"},i.a.createElement(L.e,null)),"\xa0\xa0"),i.a.createElement(K.a,{size:"sm"},i.a.createElement(z.a,{color:"info",onClick:function(){return e.onClick(e.data.id)},size:"sm"},i.a.createElement(_.g,null)),i.a.createElement(z.a,{color:"danger",onClick:function(){return e.onDelete(e.data)}},i.a.createElement(_.p,null)))))},Me=function(e){return i.a.createElement(C.a,{isOpen:e.open},i.a.createElement(q.a,null,i.a.createElement("h5",{className:"m-0"},"Apakah Anda ingin menghapus antrian")),i.a.createElement(I.a,null,i.a.createElement("tr",null,i.a.createElement("td",null,"Nama"),i.a.createElement("td",null,":"),i.a.createElement("td",null,e.data.name)),i.a.createElement("tr",null,i.a.createElement("td",null,"NIK"),i.a.createElement("td",null,":"),i.a.createElement("td",null,e.data.nik)),i.a.createElement("tr",null,i.a.createElement("td",null,"Nomor Antrian"),i.a.createElement("td",null,":"),i.a.createElement("td",null,e.data.queue_number))),i.a.createElement(Y.a,null,i.a.createElement(z.a,{onClick:e.onCancel,color:"light",size:"sm"},"Batal"),i.a.createElement(z.a,{color:"danger",onClick:function(){return e.onDelete(e.data)},size:"sm"},"Hapus")))},Te=function(e){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"col-md-9 overflow-scroll"},i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"".concat(this.props.match.path,"main"),render:function(t){return i.a.createElement(N,{models:e.props.models})}}),i.a.createElement(m.b,{exact:!0,path:"".concat(this.props.match.path,"user"),render:function(){return i.a.createElement(P,{models:e.props.models})}}),i.a.createElement(m.b,{exact:!0,path:"".concat(this.props.match.path,"pengaturan"),render:function(){return i.a.createElement(Ee,{models:e.props.models})}}),i.a.createElement(m.b,{exact:!0,path:"".concat(this.props.match.path,"tujuan"),render:function(){return i.a.createElement(X,{models:e.props.models})}}),"operator"===this.props.user.type&&i.a.createElement(m.b,{exact:!0,path:"".concat(this.props.match.path,"antrian"),render:function(){return i.a.createElement(Se,{socket:e.props.socket,provider:e.props.provider,models:e.props.models})}}),i.a.createElement(m.b,{exact:!0,path:"".concat(this.props.match.path,"rekap-antrian"),render:function(){return i.a.createElement(xe,{socket:e.props.socket,provider:e.props.provider,models:e.props.models})}}),i.a.createElement(m.b,{component:Ye})))}}]),t}(c.Component),Ye=function(){return i.a.createElement(h.a,{className:"d-flex flex-column justify-content-center align-items-center h-100"},i.a.createElement(_.k,{size:"15em",color:"#aaa"}),i.a.createElement("h3",{className:"m-0",style:{color:"#aaa"}},"Halaman tidak ada"))},ze=function(e){return i.a.createElement("div",{className:"card-header",id:"user-profile"},i.a.createElement("h5",{className:"m-0 text-truncate"},e.data.name),i.a.createElement("p",{className:"m-0 text-muted small"},e.data.type))},Qe=a(21),Le=function(e){return i.a.createElement("div",{className:"list-group list-group-flush"},i.a.createElement(Qe.c,{to:"/dashboard/main",activeClassName:"bg-danger text-white",className:"list-group-item list-group-item-action"},i.a.createElement(_.h,null),"\xa0Main Dashboard"),i.a.createElement(Qe.c,{to:"/dashboard/rekap-antrian",activeClassName:"bg-danger text-white",className:"list-group-item list-group-item-action"},i.a.createElement(_.j,null),"\xa0Laporan"),i.a.createElement(Qe.c,{to:"/dashboard/tujuan",activeClassName:"bg-danger text-white",className:"list-group-item list-group-item-action"},i.a.createElement(_.m,null),"\xa0Dokumen & Tujuan"),i.a.createElement(Qe.c,{to:"/dashboard/user",activeClassName:"bg-danger text-white",className:"list-group-item list-group-item-action"},i.a.createElement(_.n,null),"\xa0User"),i.a.createElement(Qe.c,{to:"/dashboard/pengaturan",activeClassName:"bg-danger text-white",className:"list-group-item list-group-item-action"},i.a.createElement(_.f,null),"\xa0Pengaturan"),i.a.createElement("div",{className:"logout-btn"},i.a.createElement("button",{onClick:function(){e.provider.remove().then(function(){e.logout()})},className:"btn btn-outline-dark btn-block rounded-pill"},i.a.createElement(_.l,null),"\xa0Logout")))},Ae=function(e){return i.a.createElement("div",{className:"list-group list-group-flush"},i.a.createElement(Qe.c,{to:"/dashboard/main",className:"list-group-item list-group-item-action"},"Main Dashboard"),i.a.createElement(Qe.c,{to:"/dashboard/antrian",className:"list-group-item list-group-item-action"},"Antrian Hari Ini"),i.a.createElement(Qe.c,{to:"/dashboard/rekap-antrian",className:"list-group-item list-group-item-action"},"Rekap Antrian"),i.a.createElement("div",{className:"logout-btn"},i.a.createElement("button",{onClick:function(){e.provider.remove().then(function(){e.logout()})},className:"btn btn-outline-dark btn-block rounded-pill"},i.a.createElement(_.l,null),"\xa0Logout")))};a.d(t,"default",function(){return Fe});var Fe=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={height:0,user:{type:"...",name:"Loading"},login:!0},a.componentDidMount=function(){var e,t=a.props.login;document.querySelector("#dash-wrapper")&&(e=document.querySelector("#dash-wrapper").clientHeight),a.setState({height:e,login:t})},a.componentWillReceiveProps=function(e){var t=e.login;a.setState({login:t})},a.logout=function(){var e=a.props,t=e.provider,n=e.check;t.remove().then(function(){a.setState({login:!1}),n()})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return this.props.login?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"bg-half"}),i.a.createElement("div",{className:"wrapper p-3"},i.a.createElement("div",{style:{height:"100%"},id:"dash-wrapper",className:"card border-0 shadow"},i.a.createElement("div",{style:{height:"100%"},className:"row no-gutters"},i.a.createElement("div",{style:{height:"100% !important"},className:"col-md-3 border-right position-relative"},i.a.createElement(ze,{data:this.props.user}),"administrator"===this.props.user.type?i.a.createElement(Le,{provider:this.props.provider,logout:this.logout}):"operator"===this.props.user.type?i.a.createElement(Ae,{provider:this.props.provider,logout:this.logout}):""),i.a.createElement(m.b,{path:"".concat(this.props.match.path,"/"),render:function(t){return i.a.createElement(Te,Object.assign({socket:e.props.socket,user:e.props.user,provider:e.props.provider,models:e.props.models},t))}}))))):i.a.createElement(m.a,{to:"/login"})}}]),t}(c.Component)}}]);
//# sourceMappingURL=7.64f661f1.chunk.js.map