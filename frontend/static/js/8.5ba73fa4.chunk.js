(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{197:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(12),l=a(14),s=a(13),o=a(15),c=a(0),i=a.n(c),m=a(10),u=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={documents:0},a.componentDidMount=function(){document.title="Halaman Utama"},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"card-body"},i.a.createElement("h5",{className:"text-right m-0"},"Main Dashboard"),i.a.createElement("hr",null))}}]),t}(c.Component),d=a(22),p=a(201),h=a(178),g=a(179),E=a(146),f=a(147),b=function(e){return i.a.createElement("input",{type:e.type,className:"form-control form-control-lg rounded-pill my-2",name:e.name,value:e.value,placeholder:e.placeholder,onChange:e.onChange})},v=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={name:"",username:"",password:"",type:"administrator",edit:!1,modal:!1,loading:!1},a.onChange=function(e){a.setState(Object(d.a)({},e.target.name,e.target.value))},a.submit=function(e){e.preventDefault(),a.setState({loading:!0});var t=a.state,n=t.username,r=t.name,l=t.password,s=t.type;a.props.onClick({username:n,name:r,password:l,type:s},function(){a.setState({loading:!1},a.clear())})},a.clear=function(){return a.setState({name:"",username:"",password:"",type:"administrator",edit:!1,modal:!1})},a.editSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.name,l=t.type,s=t.password;a.props.update({username:n,name:r,type:l,password:s},a.clear)},a.componentWillReceiveProps=function(e){var t=e.user,n=t.name,r=t.type,l=t.username,s=e.edit;a.setState({name:n,type:r,username:l,edit:s})},a.open=function(){return a.setState({modal:!0})},a.close=function(){return a.setState({modal:!1})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(p.a,{size:"lg",toggle:this.close,isOpen:this.state.modal},i.a.createElement(h.a,{color:"success",toggle:this.close},this.state.edit?"Edit ".concat(this.state.name):"Tambah Pengguna"),i.a.createElement(g.a,null,i.a.createElement("form",{className:"form-group"},i.a.createElement(b,{placeholder:"Nama Lengkap",type:"text",name:"name",value:this.state.name,onChange:this.onChange}),i.a.createElement(b,{placeholder:"Username",type:"text",name:"username",value:this.state.username,onChange:this.onChange}),i.a.createElement(b,{placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.onChange}),i.a.createElement("select",{name:"type",value:this.state.type,onChange:function(t){return e.setState({type:t.target.value})},className:"form-control form-control-lg rounded-pill"},i.a.createElement("option",{value:""},"Pilih tipe user"),i.a.createElement("option",{value:"administrator"},"Administrator"),i.a.createElement("option",{value:"operator"},"Operator")),i.a.createElement("hr",null),this.state.loading&&i.a.createElement(i.a.Fragment,null,i.a.createElement("hr",null),i.a.createElement(E.a,{color:"success"},i.a.createElement(f.a,{size:"sm"}),"\xa0Loading"),i.a.createElement("hr",null)),!this.state.edit&&i.a.createElement("button",{type:"button",onClick:this.submit,className:"btn btn-success"},"Daftar"),this.state.edit&&i.a.createElement("button",{type:"button",onClick:this.editSubmit,className:"btn btn-success"},"Simpan"),this.state.edit&&i.a.createElement("button",{type:"button",onClick:this.clear,className:"btn btn-danger"},"Batal"))))}}]),t}(c.Component),y=a(149),k=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={users:{rows:[],count:0},limit:10,offset:0,page:1,total_page:1,user:{name:"",username:"",type:""},edit:!1,loading:!1},a.componentDidMount=function(){document.title="Pengguna",a.getUser(!0)},a.getUser=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props.models.User,n=a.state,r=n.limit,l=n.offset;e&&a.setState({loading:!0}),t.collection({limit:r,offset:l}).then(function(e){var t=Math.ceil(e.count/r);a.setState({users:e,total_page:t,loading:!1})})},a.next=function(){var e=a.state,t=e.limit,n=e.page,r=e.total_page;n=n<r?n+1:r;var l=parseInt((n-1)*t);a.setState({offset:l,total_page:r,page:n},function(){return a.getUser()})},a.prev=function(){var e=a.state,t=e.limit,n=e.page,r=e.total_page;n=n>1?n-1:1;var l=parseInt((n-1)*t);a.setState({offset:l,total_page:r,page:n},function(){return a.getUser()})},a.addUser=function(e,t){a.props.models.User.create(e).then(function(){a.getUser(),t()})},a.deleteUser=function(e){e.delete().then(function(){return a.getUser()})},a.updateUser=function(e,t){a.state.user.update(e).then(function(){t(),a.getUser(),a.setState({user:{},edit:!1})})},a.edit=function(e){return a.setState({user:e,edit:!0},function(){return a.register.open()})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-body"},i.a.createElement("h5",{className:"mb-2"},"User"),i.a.createElement("hr",null),i.a.createElement(v,{ref:function(t){return e.register=t},update:this.updateUser,user:this.state.user,edit:this.state.edit,onClick:this.addUser}),i.a.createElement("div",{className:"d-flex flex-row justify-content-between"},this.state.total_page>0&&i.a.createElement("div",{className:"btn-group btn-group-sm"},i.a.createElement("button",{className:"btn btn-primary",onClick:this.prev},"Prev"),i.a.createElement("button",{className:"btn btn-light",disabled:!0},this.state.page,"/",this.state.total_page),i.a.createElement("button",{className:"btn btn-primary",onClick:this.next},"Next")),i.a.createElement("button",{onClick:function(){return e.register.open()},className:"btn btn-outline-success btn-sm"},i.a.createElement(y.a,null),"\xa0Tambah Pengguna"))),i.a.createElement("table",{className:"table table-striped table-bordered"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No."),i.a.createElement("th",null,"Nama"),i.a.createElement("th",null,"Username"),i.a.createElement("th",null,"Tipe"),i.a.createElement("th",null,"Edit/Delete"))),i.a.createElement("tbody",null,this.state.loading&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:5},i.a.createElement("p",{className:"text-center text-muted m-0"},i.a.createElement(f.a,{size:"sm",color:"secondary"}),"\xa0Loading"))),this.state.users.rows.map(function(t,a){return i.a.createElement(N,{key:a,edit:e.edit,index:e.state.page>1?e.state.page+(a+1):a+1,onClick:e.deleteUser,user:t})}))),i.a.createElement("div",{className:"card-body"},this.state.total_page>0&&i.a.createElement("div",{className:"btn-group btn-group-sm"},i.a.createElement("button",{className:"btn btn-primary",onClick:this.prev},"Prev"),i.a.createElement("button",{className:"btn btn-light",disabled:!0},this.state.page,"/",this.state.total_page),i.a.createElement("button",{className:"btn btn-primary",onClick:this.next},"Next"))))}}]),t}(c.Component),N=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.index),i.a.createElement("td",null,e.user.name),i.a.createElement("td",null,e.user.username),i.a.createElement("td",null,e.user.type.charAt(0).toUpperCase()+e.user.type.slice(1)),i.a.createElement("td",null,i.a.createElement("button",{onClick:function(){return e.edit(e.user)},className:"btn btn-warning btn-sm"},"Edit"),i.a.createElement("button",{onClick:function(){return e.onClick(e.user)},className:"btn btn-danger btn-sm"},"Hapus")))},C=a(180),S=a(181),q=a(158),w=a(150),O=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,name:"",requirements:[],fields:[],requirement:"",required:[],loading:!1,filter:[]},a.open=function(){a.setState({open:!0}),a.getRequirements()},a.close=function(){a.setState({open:!1})},a.add=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.fields;a.props.add({name:n,requirements:r})},a.removeRequirement=function(e){for(var t=a.state,n=t.requirements,r=t.fields.filter(function(t){return t.name!==e}),l=0;l<n.length;l++)e===n[l].label&&(n[l].disable=!1);a.setState({requirements:n,fields:r})},a.addRequirement=function(){var e=a.state,t=e.requirement,n=e.fields,r=e.filter,l=e.requirements;n.push({name:t.value,required:!0});for(var s=0;s<l.length;s++)t.label===l[s].label&&(l[s].disable=!0);a.setState({fields:n,requirement:"",filter:r,requirements:l})},a.getRequirements=function(){var e=a.props.models.Requirement;a.setState({loading:!0}),e.collection({limit:999,offset:0}).then(function(e){var t=e.rows.map(function(e){return{value:e.name,label:e.name,disable:!1}});a.setState({requirements:t,loading:!1})})},a.onChange=function(e){var t=a.state.fields;t[e].required=!t[e].required,a.setState({fields:t})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(p.a,{isOpen:this.state.open,size:"lg",backdrop:"static"},i.a.createElement(h.a,null,"Tambah Tujuan"),i.a.createElement(g.a,null,i.a.createElement(b,{name:"name",placeholder:"Tujuan",onChange:function(t){return e.setState({name:t.target.value})}}),this.state.requirements.length>0?i.a.createElement(i.a.Fragment,null,!this.state.loading&&i.a.createElement(q.a,{value:this.state.requirement,onChange:function(t){return e.setState({requirement:t})},placeholder:"Pilih Dokumen",ref:"select",isOptionDisabled:function(e){return e.disable},options:this.state.requirements}),i.a.createElement("hr",null),i.a.createElement("button",{disabled:""===this.state.requirement,type:"submit",onClick:this.addRequirement,className:"btn btn-success btn-sm rounded-pill"},"Tambah Persyaratan")):this.state.loading?i.a.createElement(E.a,{color:"info"},i.a.createElement(f.a,{color:"info",size:"sm"}),"\xa0Loading"):i.a.createElement(C.a,{block:!0,outline:!0,color:"success",onClick:function(){e.close(),e.props.addRequirement()},size:"lg"},"Tambah Dokumen Persyaratan")),i.a.createElement("table",{className:"table table-striped table-bordered"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Persyaratan"),i.a.createElement("th",null,"Opsional"),i.a.createElement("th",null,"Hapus"))),i.a.createElement("tbody",null,0===this.state.fields.length&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"3"},i.a.createElement("p",{className:"m-0 text-center text-muted"},"Tambah dokumen jika diperlukan"))),this.state.fields.map(function(t,a){return i.a.createElement(j,Object.assign({removeRequirement:e.removeRequirement,checked:t.required,onChange:e.onChange,index:a,key:a},t))}))),i.a.createElement(S.a,null,i.a.createElement(C.a,{color:"success",outline:!0,onClick:this.add,className:"rounded-pill"},"Tambah Tujuan"),i.a.createElement(C.a,{color:"danger",outline:!0,onClick:this.close,className:"rounded-pill"},"Tutup")))}}]),t}(c.Component),j=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.name),i.a.createElement("td",null,i.a.createElement("input",{type:"checkbox",onChange:function(){return e.onChange(e.index)},value:!e.required,checked:e.required})),i.a.createElement("td",null,i.a.createElement("button",{onClick:function(){return e.removeRequirement(e.name)},className:"btn btn-outline-danger btn-sm"},i.a.createElement(w.i,null))))},x=a(182),P=a(183),D=a(184),T=a(185),M=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,name:"",requirements:{rows:[],count:1},page:1,offset:0,limit:10,totalPage:1,submitting:!1,requirement:{name:""},edit:!1,loading:!1},a.componentDidMount=function(){a.getList(!0)},a.getList=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props.models.Requirement;e&&a.setState({loading:!0}),t.collection({limit:5,offset:0}).then(function(e){var t=a.state.limit,n=Math.ceil(e.count/t);a.setState({requirements:e,totalPage:n,loading:!1})})},a.cancel=function(){a.setState({requirement:{name:""},edit:!1,name:""})},a.close=function(){a.setState({open:!1})},a.edit=function(e){return a.setState({edit:!0,requirement:e,name:e.name})},a.delete=function(e){e.delete().then(function(){return a.setState({requirement:{name:""},edit:!1},function(){return a.getList()})})},a.update=function(){var e=a.state,t=e.requirement,n=e.name;t.update({name:n}).then(function(){return a.setState({name:"",requirement:{name:""},edit:!1},function(){return a.getList()})})},a.addRequirement=function(e){e.preventDefault();var t=a.props.models.Requirement,n=a.state.name;a.setState({submitting:!0},function(){t.create({name:n}).then(function(){a.setState({name:"",submitting:!1},function(){return a.getList()})})})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{size:"lg",isOpen:this.state.open,backdrop:"static"},i.a.createElement(h.a,{className:"bg-danger border-bottom border-danger text-white",toggle:this.close},"Tambah Dokumen"),i.a.createElement(g.a,null,i.a.createElement("form",{action:"",method:"post"},i.a.createElement(x.a,null,i.a.createElement(P.a,{readOnly:this.state.submitting,placeholder:"Nama Dokumen",onChange:function(t){return e.setState({name:t.target.value})},value:this.state.submitting?"Menambah Dokumen":this.state.name,name:"name"}),i.a.createElement(D.a,{addonType:"append"},this.state.edit&&i.a.createElement(C.a,{color:"danger",outline:!0,onClick:this.cancel},"Cancel"),this.state.edit&&i.a.createElement(C.a,{color:"success",outline:!0,onClick:this.update},"Simpan"),!this.state.edit&&i.a.createElement(C.a,{color:"success",outline:!0,onClick:this.addRequirement},"Tambah"))),i.a.createElement("hr",null))),i.a.createElement(T.a,{striped:!0,hover:!0,bordered:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No."),i.a.createElement("th",null,"Nama"),i.a.createElement("th",null,"Edit/Hapus"))),i.a.createElement("tbody",null,this.state.loading?i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},i.a.createElement("p",{className:"text-muted m-0 text-center"},i.a.createElement(f.a,{size:"sm",color:"secondary"})," Loading"))):this.state.requirements.rows.length>0?this.state.requirements.rows.map(function(t,a){return i.a.createElement(z,{key:a,edit:e.edit,deleteRequirement:e.delete,req:t,index:a+1})}):i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},i.a.createElement("p",{className:"text-muted m-0 text-center"},"Belum Ada Dokumen Persyaratan"))))),i.a.createElement(S.a,null,i.a.createElement(C.a,{outline:!0,onClick:this.close,color:"dark",size:"sm"},"Tutup"))))}}]),t}(c.Component),z=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.index),i.a.createElement("td",null,e.req.name),i.a.createElement("td",null,i.a.createElement("div",{className:"btn-group btn-group-sm"},i.a.createElement("button",{onClick:function(){return e.edit(e.req)},className:"btn btn-warning"},"Edit"),i.a.createElement("button",{onClick:function(){return e.deleteRequirement(e.req)},className:"btn btn-danger"},"Hapus"))))},L=a(188),R=a(189),_=a(186),A=a(187),U=a(190),H=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,reqs:[],req:"",name:"",loading:!1,requirements:[]},a.getRequirements=function(){a.setState({loading:!0}),a.props.models.Requirement.collection({limit:999,offset:0}).then(function(e){var t=e.rows.map(function(e){return{value:e.name,label:e.name,disabled:!1}});a.setState({reqs:t},function(){return a.check()})})},a.check=function(){for(var e=a.state,t=e.reqs,n=e.requirements,r=0;r<t.length;r++)for(var l=0;l<n.length;l++)t[r].label===n[l].name&&(t[r].disabled=!0);a.setState({reqs:t,loading:!1})},a.open=function(){var e=a.props.requirements,t=e.name,n=e.requirements;a.setState({open:!0,name:t,requirements:n},function(){return a.getRequirements()})},a.close=function(){return a.setState({open:!1})},a.save=function(){var e=a.state,t=e.name,n=e.requirements;a.props.requirements.update({name:t,requirements:n}).then(function(){a.close(),a.props.reload()})},a.addReq=function(){for(var e=a.state,t=e.req,n=e.reqs,r=e.requirements,l=0;l<n.length;l++)n[l].label===t.label&&(n[l].disabled=!0);r.push({name:t.label,required:!0}),a.setState({reqs:n,req:"",requirements:r})},a.removeReq=function(e){for(var t=a.state,n=t.requirements,r=t.reqs,l=0;l<r.length;l++)r[l].label===e.name&&(r[l].disabled=!1);var s=n.filter(function(t){return t.name!==e.name});a.setState({requirements:s})},a.checkClicked=function(e){var t=a.state.requirements;t[e.index].required=!t[e.index].required,a.setState({requirements:t})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state.requirements;return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{backdrop:"static",isOpen:this.state.open,size:"lg",style:{maxWitdh:"80%"}},i.a.createElement(h.a,{className:"bg-warning border-warning",toggle:this.close}),i.a.createElement(g.a,null,i.a.createElement("input",{type:"text",placeholder:"Tujuan",onChange:function(t){return e.setState({name:t.target.value})},className:"form-control rounded-pill my-3",value:this.state.name}),i.a.createElement("hr",null),!this.state.loading&&i.a.createElement(q.a,{value:this.state.req,onChange:function(t){return e.setState({req:t})},isOptionDisabled:function(e){return e.disabled},placeholder:"Pilih Dokumen",options:this.state.reqs}),""===this.state.req?i.a.createElement(C.a,{color:"success",size:"sm",disabled:!0,className:"my-2"},"Tambah"):i.a.createElement(C.a,{color:"success",size:"sm",onClick:this.addReq,className:"my-2"},"Tambah")),i.a.createElement(T.a,{bordered:!0,hover:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Nama"),i.a.createElement("th",null,"Opsional"),i.a.createElement("th",null,"Hapus"))),i.a.createElement("tbody",null,t.length>0?t.map(function(t,a){return i.a.createElement(I,Object.assign({checkClicked:e.checkClicked,removeReq:e.removeReq},t,{key:a,index:a}))}):i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},i.a.createElement("p",{className:"m-0 text-muted text-center"},"Tidak ada persyaratan"))))),i.a.createElement(S.a,null,i.a.createElement(C.a,{color:"success",onClick:this.save,outline:!0},"Simpan"))))}}]),t}(c.Component),I=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.name),i.a.createElement("td",null,i.a.createElement("input",{type:"checkbox",onChange:function(){return e.checkClicked(e)},value:!e.required,checked:e.required})),i.a.createElement("td",null,i.a.createElement(C.a,{onClick:function(){return e.removeReq(e)},color:"danger",size:"sm",outline:!0},"Hapus")))},F=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,name:"",requirements:{rows:[],count:1},page:1,offset:0,limit:10,totalPage:1,submitting:!1,requirement:{name:""},edit:!1,loading:!1},a.open=function(){a.setState({open:!0},a.getList)},a.getList=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props.models.Requirement,n=a.state,r=n.offset,l=n.limit;e&&a.setState({loading:!0}),t.collection({limit:l,offset:r}).then(function(e){var t=Math.ceil(e.count/l);a.setState({requirements:e,totalPage:t,loading:!1})})},a.componentDidMount=function(){a.getList(!0)},a.cancel=function(){a.setState({requirement:{name:""},edit:!1,name:""})},a.close=function(){a.setState({open:!1})},a.edit=function(e){return a.setState({edit:!0,requirement:e,name:e.name})},a.delete=function(e){e.delete().then(function(){return a.setState({requirement:{name:""},edit:!1},function(){return a.getList()})})},a.update=function(){var e=a.state,t=e.requirement,n=e.name;t.update({name:n}).then(function(){return a.setState({name:"",requirement:{name:""},edit:!1},function(){return a.getList()})})},a.addRequirement=function(e){e.preventDefault();var t=a.props.models.Requirement,n=a.state.name;return a.setState({submitting:!0},function(){t.create({name:n}).then(function(){a.setState({name:"",submitting:!1},function(){return a.getList()})})}),!1},a.next=function(){var e=a.state,t=e.totalPage,n=e.offset,r=e.limit,l=e.page;l=l<t?l+1:t,n=parseInt((l-1)*r),a.setState({offset:n,page:l},function(){return a.getList()})},a.prev=function(){var e=a.state,t=e.limit,n=e.page,r=e.totalPage;n=n>1?n-1:1;var l=parseInt((n-1)*t);a.setState({offset:l,totalPage:r,page:n},function(){return a.getList()})},a.limitChange=function(e){a.setState({limit:e.target.value,offset:0,page:1},function(){return a.getList()})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{action:"",className:"px-2",method:"post"},i.a.createElement(x.a,{size:"sm"},i.a.createElement(P.a,{readOnly:this.state.submitting,placeholder:"Nama Dokumen",onChange:function(t){return e.setState({name:t.target.value})},value:this.state.submitting?"Menambah Dokumen":this.state.name,name:"name"}),i.a.createElement(D.a,{addonType:"append"},this.state.edit&&i.a.createElement(C.a,{color:"danger",type:"button",outline:!0,onClick:this.cancel},"Cancel"),this.state.edit&&i.a.createElement(C.a,{type:"submit",color:"success",outline:!0,onClick:this.update},"Simpan"),!this.state.edit&&i.a.createElement(C.a,{type:"submit",color:"success",outline:!0,onClick:this.addRequirement},"Tambah")))),i.a.createElement(_.a,{className:"border-0 my-2"},i.a.createElement(T.a,{striped:!0,hover:!0,bordered:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No."),i.a.createElement("th",null,"Nama"),i.a.createElement("th",null,"Edit/Hapus"))),i.a.createElement("tbody",null,this.state.loading?i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},i.a.createElement("p",{className:"text-muted m-0 text-center"},i.a.createElement(f.a,{size:"sm",color:"secondary"})," Loading"))):this.state.requirements.rows.length>0?this.state.requirements.rows.map(function(t,a){return i.a.createElement(J,{key:a,edit:e.edit,deleteRequirement:e.delete,req:t,index:a+1+e.state.offset})}):i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3},i.a.createElement("p",{className:"text-muted m-0 text-center"},"Belum Ada Dokumen Persyaratan"))))),i.a.createElement(A.a,null,i.a.createElement(L.a,{noGutters:!0},i.a.createElement(R.a,{sm:"7"},i.a.createElement(U.a,{size:"sm"},i.a.createElement(C.a,{disabled:0===this.state.totalPage|1,onClick:this.prev,color:"primary"},"Prev"),i.a.createElement(C.a,{disabled:!0,color:"light"},"".concat(this.state.page,"/").concat(this.state.totalPage>0?this.state.totalPage:1)),i.a.createElement(C.a,{disabled:0===this.state.totalPage|1,onClick:this.next,color:"primary"},"Next"))),i.a.createElement(R.a,null,i.a.createElement(x.a,null,i.a.createElement(P.a,{value:this.state.limit,onChange:this.limitChange,type:"number"}),i.a.createElement(D.a,{addonType:"append"},"Limit/Halaman")))))))}}]),t}(c.Component),J=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.index),i.a.createElement("td",null,e.req.name),i.a.createElement("td",null,i.a.createElement("div",{className:"btn-group btn-group-sm"},i.a.createElement("button",{onClick:function(){return e.edit(e.req)},className:"btn btn-warning"},"Edit"),i.a.createElement("button",{onClick:function(){return e.deleteRequirement(e.req)},className:"btn btn-danger"},"Hapus"))))},Q=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={purposes:{rows:[],count:1},requirements:{requirements:[]},modal:!1,limit:10,offset:0,page:1,totalPage:1,loading:!1},a.componentDidMount=function(){document.title="Dokumen & Tujuan",a.getPurpose(!0)},a.getPurpose=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props.models.Purpose,n=a.state,r=n.limit,l=n.offset;e&&a.setState({loading:!0}),t.collection({limit:r,offset:l}).then(function(e){var t=Math.ceil(e.count/a.state.limit);a.setState({purposes:e,totalPage:t,loading:!1})})},a.addPurpose=function(e){a.props.models.Purpose.create(e).then(function(){a.addModal.close(),a.getPurpose()})},a.deletePurpose=function(e){e.delete().then(function(){a.getPurpose()})},a.editPurpose=function(e){return a.setState({requirements:e},function(){return a.editModal.open()})},a.next=function(){var e=a.state,t=e.totalPage,n=e.offset,r=e.limit,l=e.page;l=l<t?l+1:t,n=parseInt((l-1)*r),a.setState({offset:n,page:l},function(){return a.getPurpose()})},a.prev=function(){var e=a.state,t=e.limit,n=e.page,r=e.totalPage;n=n>1?n-1:1;var l=parseInt((n-1)*t);a.setState({offset:l,totalPage:r,page:n},function(){return a.getPurpose()})},a.limitChange=function(e){a.setState({limit:e.target.value,page:1,offset:0},function(){return a.getPurpose()})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-body"},i.a.createElement("h5",{className:"m-0"},"Dokumen & Tujuan"),i.a.createElement("hr",null)),i.a.createElement(L.a,{noGutters:!0},i.a.createElement(R.a,{md:"6",className:"pr-1"},i.a.createElement("button",{className:"btn btn-primary btn-sm rounded-pill mx-2",onClick:function(){return e.addModal.open()}},"Tambah tujuan"),i.a.createElement(_.a,{className:"my-2 border-0"},i.a.createElement("table",{className:"table table-striped table-bordered"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No."),i.a.createElement("th",null,"Tujuan"),i.a.createElement("th",null,"Lihat Dok/Edit/Delete"))),i.a.createElement("tbody",null,this.state.loading?i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3,className:"text-center"},i.a.createElement("p",{className:"text-muted small text-center m-0"},i.a.createElement(f.a,{size:"sm",color:"secondary"}),"\xa0Loading"))):this.state.purposes.rows.length>0?this.state.purposes.rows.map(function(t,a){return i.a.createElement(B,{key:a,edit:e.editPurpose,index:a+1+e.state.offset,requirement:function(t){return e.setState({requirements:t,modal:!0})},onClick:e.deletePurpose,purpose:t})}):i.a.createElement("tr",null,i.a.createElement("td",{colSpan:3,className:"text-center"},i.a.createElement("p",{className:"text-muted small text-center m-0"},"Belum ada Tujuan\xa0 ",i.a.createElement(C.a,{color:"success",size:"sm",outline:!0,onClick:function(){return e.addModal.open()}},"Tambah tujuan")))))),i.a.createElement(A.a,null,i.a.createElement(L.a,{noGutters:!0},i.a.createElement(R.a,{sm:"7"},i.a.createElement(U.a,{size:"sm"},i.a.createElement(C.a,{disabled:0===this.state.totalPage|1,onClick:this.prev,color:"primary"},"Prev"),i.a.createElement(C.a,{color:"light",disabled:!0},this.state.page,"/",0===this.state.totalPage?1:this.state.totalPage),i.a.createElement(C.a,{disabled:0===this.state.totalPage|1,onClick:this.next,color:"primary"},"Next"))),i.a.createElement(R.a,null,i.a.createElement(x.a,{size:"sm"},i.a.createElement(P.a,{value:this.state.limit,onChange:this.limitChange,type:"number"}),i.a.createElement(D.a,{addonType:"append"},"Limit/Halaman"))))))),i.a.createElement(R.a,{md:"6",className:"pl-1"},i.a.createElement(F,{models:this.props.models}))),i.a.createElement("div",{className:"card-body"}),i.a.createElement(O,{addRequirement:function(){return e.requirementModal.open()},add:this.addPurpose,models:this.props.models,ref:function(t){return e.addModal=t}}),i.a.createElement(M,{ref:function(t){return e.requirementModal=t},models:this.props.models}),i.a.createElement(Y,{requirements:this.state.requirements,close:function(){return e.setState({modal:!1})},open:this.state.modal}),i.a.createElement(H,{models:this.props.models,reload:this.getPurpose,ref:function(t){return e.editModal=t},requirements:this.state.requirements}))}}]),t}(c.Component),B=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.index),i.a.createElement("td",null,e.purpose.name),i.a.createElement("td",null,i.a.createElement("div",{className:"btn-group btn-group-sm"},i.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.requirement(e.purpose)}},i.a.createElement(w.a,null)),i.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.edit(e.purpose)}},i.a.createElement(w.f,null)),i.a.createElement("button",{onClick:function(){return e.onClick(e.purpose)},className:"btn btn-danger"},i.a.createElement(w.i,null)))))},Y=function(e){return i.a.createElement(p.a,{toggle:e.close,isOpen:e.open},i.a.createElement(h.a,{toggle:e.close,className:"bg-primary text-white"},e.requirements.name),i.a.createElement(T.a,{bordered:!0,hover:!0,striped:!0,responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Persyaratan"),i.a.createElement("th",null,"Opsional"))),i.a.createElement("tbody",null,e.requirements.requirements.length>0?e.requirements.requirements.map(function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,e.name),i.a.createElement("td",null,e.required?"Penting":"Opsional"))}):i.a.createElement("tr",null,i.a.createElement("td",{colSpan:2},i.a.createElement("p",{className:"m-0 text-muted text-center"},"Tidak ada persyaratan"))))),i.a.createElement(S.a,null,i.a.createElement("button",{className:"btn btn-outline-dark btn-sm rounded-pill",onClick:e.close},"Tutup")))},W=a(148),G=a.n(W),K=a(152),V=a.n(K),X=(a(153),function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={openModal:!1,date:"",open:"08:00",close:"16:00",break_start:"13:00",break_end:"14:00",tolerance:5,processing_time:5,operator:5,dates:[],success:!1,loading:!1},a.open=function(){a.setState({openModal:!0})},a.onChange=function(e){a.setState(Object(d.a)({},e.target.name,e.target.value))},a.close=function(){return a.setState({openModal:!1})},a.save=function(e){e.preventDefault();var t=a.props.models.Schedule,n=a.state,r=n.name,l=n.date,s=n.break_end,o=n.break_start,c=n.open,i=n.close,m=n.tolerance,u=n.processing_time,d=n.operator;a.setState({loading:!0}),t.create({name:r,date:l[0],break_end:s,break_start:o,open:c,close:i,tolerance:m,processing_time:u,operator:d}).then(function(){a.setState({success:!0,loading:!1,date:""}),a.getDates(),a.props.get()})},a.getDates=function(){a.props.models.Schedule.collection({limit:9999,offset:0}).then(function(e){var t=e.rows.map(function(e){return e.date});a.setState({dates:t})})},a.closeAlert=function(){return a.setState({success:!1})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.getDates()}},{key:"render",value:function(){var e=this,t={minDate:G()().format("Y-MM-DD"),disable:this.state.dates};return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{size:"lg",isOpen:this.state.openModal},i.a.createElement(h.a,{toggle:this.close,className:"bg-success text-white"},"Tambah Jadwal"),i.a.createElement(g.a,null,i.a.createElement("label",{htmlFor:"",className:"my-2"},"Tanggal"),i.a.createElement(V.a,{options:t,className:"form-control",placeholder:"Tanggal",onChange:function(t){return e.setState({date:t})},value:this.state.date}),i.a.createElement("label",{htmlFor:"",className:"my-2"},"Waktu Penanganan"),i.a.createElement(P.a,{type:"number",disabled:this.state.loading,value:this.state.processing_time,name:"processing_time",onChange:this.onChange}),i.a.createElement("label",{htmlFor:"",className:"my-2"},"Jumlah Operator"),i.a.createElement(P.a,{type:"number",disabled:this.state.loading,value:this.state.operator,name:"operator",onChange:this.onChange}),i.a.createElement(x.a,{className:"my-2"},i.a.createElement(D.a,{addonType:"prepend"},"Jam Buka"),i.a.createElement(P.a,{type:"time",disabled:this.state.loading,name:"open",onChange:this.onChange,placeholder:"Jam Buka",value:this.state.open,id:""}),i.a.createElement(D.a,{addonType:"prepend"},"Jam Tutup"),i.a.createElement(P.a,{type:"time",disabled:this.state.loading,name:"close",onChange:this.onChange,placeholder:"Jam Tutup",value:this.state.close,id:""})),i.a.createElement(x.a,{className:"my-2"},i.a.createElement(D.a,{addonType:"prepend"},"Jam Istirahat"),i.a.createElement(P.a,{type:"time",disabled:this.state.loading,name:"break_start",onChange:this.onChange,placeholder:"Jam Istirahat",value:this.state.break_start,id:""}),i.a.createElement(D.a,{addonType:"prepend"},"s/d"),i.a.createElement(P.a,{type:"time",disabled:this.state.loading,name:"break_end",onChange:this.onChange,placeholder:"Jam Kerja",value:this.state.break_end,id:""})),i.a.createElement("label",{htmlFor:"",className:"my-2"},"Toleransi"),i.a.createElement(x.a,{className:"my-2"},i.a.createElement(P.a,{type:"number",disabled:this.state.loading,name:"tolerance",onChange:this.onChange,placeholder:"Jam Tutup",value:this.state.tolerance,id:""}),i.a.createElement(D.a,{addonType:"append"},"Menit")),i.a.createElement("hr",null),i.a.createElement(E.a,{color:"info"},"Waktu pengerjaan + waktu toleransi harus habis dibagi 60"),i.a.createElement(E.a,{color:"success",isOpen:this.state.success,toggle:this.closeAlert},"Tanggal berhasil ditambahkan"),i.a.createElement(E.a,{color:"info",isOpen:this.state.loading},i.a.createElement(f.a,{color:"info",size:"sm"}),"\xa0Loading")),i.a.createElement(S.a,null,i.a.createElement(C.a,{color:"success",onClick:this.save,outline:!0},i.a.createElement(w.g,null),"\xa0Simpan"),i.a.createElement(C.a,{color:"danger",onClick:this.close,outline:!0},i.a.createElement(w.h,null),"\xa0Tutup"))))}}]),t}(c.Component));a(151);G.a.locale("id");var Z=function(e){return i.a.createElement("svg",{className:"card-img-top",width:"100%",height:"130",textAnchor:"middle",alignmentBaseline:"middle"},i.a.createElement("rect",{fill:"#e74c3c",width:"100%",height:"100%"}),i.a.createElement("text",{x:"50%",y:"60%",fontSize:"50pt",fill:"white"},G()(e.date).format("DD")),i.a.createElement("text",{x:"50%",y:"80%",fontSize:"20pt",fill:"white"},G()(e.date).format("MMMM")))},$=function(e){return i.a.createElement("div",{className:"col-md-3 my-2"},i.a.createElement(_.a,{className:"border-0 shadow-sm"},i.a.createElement(Z,e.setting),i.a.createElement(T.a,{responsive:!0,bordered:!0,striped:!0},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Operator"),i.a.createElement("td",null,i.a.createElement("b",null,e.setting.operator)," orang")),i.a.createElement("tr",null,i.a.createElement("td",null,"Jam Buka"),i.a.createElement("td",null,e.setting.open)),i.a.createElement("tr",null,i.a.createElement("td",null,"Jam Tutup"),i.a.createElement("td",null,e.setting.close)),i.a.createElement("tr",null,i.a.createElement("td",null,"Lama Penanganan"),i.a.createElement("td",null,e.setting.processing_time," menit")),i.a.createElement("tr",null,i.a.createElement("td",null,"Jam Istirahat"),i.a.createElement("td",null,e.setting.break_start)),i.a.createElement("tr",null,i.a.createElement("td",null,"Jam Selesai Istirahat"),i.a.createElement("td",null,e.setting.break_end)),i.a.createElement("tr",null,i.a.createElement("td",null,"Toleransi"),i.a.createElement("td",null,e.setting.tolerance," menit")))),i.a.createElement(A.a,null,i.a.createElement(C.a,{onClick:function(){return e.deleteSetting(e.setting)},color:"danger",outline:!0,size:"sm",className:"rounded-pill"},"Hapus"))))},ee=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={openModal:!1,date:new Date,open:"08:00",close:"16:00",break_start:"13:00",break_end:"14:00",tolerance:1},a.componentDidMount=function(){var e=a.props.lastDate,t=G()(e).add(1,"day");a.setState({date:t})},a.onChange=function(e){a.setState(Object(d.a)({},e.target.name,e.target.value))},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"col-md-3 my-2"},i.a.createElement(_.a,{className:"border-0 shadow-sm"},i.a.createElement(Z,this.state),i.a.createElement(T.a,{bordered:!0,striped:!0},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Jam Buka"),i.a.createElement("td",null,i.a.createElement(P.a,{name:"open",onChange:this.onChange,value:this.state.open,bsSize:"sm",type:"time"}))),i.a.createElement("tr",null,i.a.createElement("td",null,"Jam Tutup"),i.a.createElement("td",null,i.a.createElement(P.a,{name:"close",onChange:this.onChange,value:this.state.close,type:"time"})))))))}}]),t}(c.Component),te=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={schedules:{rows:[],count:1},modal:!1,schedule:{date:new Date},addSchedule:!1,totalPage:1,page:1,offset:0,limit:4,loading:!1},a.getSchedule=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props.models.Schedule,n=a.state,r=n.totalPage,l=n.offset,s=n.limit;e&&a.setState({loading:!0}),t.collection({limit:s,offset:l,order:[["date","asc"]]}).then(function(e){r=Math.ceil(e.count/s),a.setState({schedules:e,totalPage:r,loading:!1})})},a.componentDidMount=function(){a.getSchedule(!0)},a.delete=function(e){e.delete().then(function(){a.setState({schedule:{},modal:!1}),a.getSchedule()})},a.next=function(){var e=a.state,t=e.totalPage,n=e.offset,r=e.limit,l=e.page;l=l<t?l+1:t,n=parseInt((l-1)*r),a.setState({offset:n,page:l},function(){return a.getSchedule()})},a.prev=function(){var e=a.state,t=e.limit,n=e.page,r=e.totalPage;n=n>1?n-1:1;var l=parseInt((n-1)*t);a.setState({offset:l,totalPage:r,page:n},function(){return a.getSchedule()})},a.first=function(){a.setState({offset:0,page:1},function(){return a.getSchedule()})},a.last=function(){var e=a.state,t=e.totalPage,n=e.limit,r=parseInt((t-1)*n);a.setState({offset:r,page:t},function(){return a.getSchedule()})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;document.title="Booking | Pengaturan";var t=this.state.schedules.rows;return i.a.createElement("div",{className:"card-body"},i.a.createElement("h4",{className:"m-0"},"Pengaturan"),i.a.createElement("hr",null),i.a.createElement(C.a,{outline:!0,onClick:function(){return e.addSetting.open()},color:"success"},i.a.createElement(y.g,null),"\xa0Tambah Pengaturan"),i.a.createElement("hr",null),i.a.createElement("div",{className:"row"},this.state.loading&&i.a.createElement(R.a,{md:"12"},i.a.createElement(E.a,{color:"dark",className:"text-center"},i.a.createElement("h4",{className:"m-0"},i.a.createElement(f.a,null),"\xa0Loading"))),t.map(function(t,a){return i.a.createElement($,{deleteSetting:function(t){return e.setState({schedule:t,modal:!0})},key:a,setting:t})}),this.state.addSchedule&&i.a.createElement(ee,{lastDate:t[t.length-1].date})),i.a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center my-3"},this.state.totalPage>0&&i.a.createElement(U.a,{size:"sm"},i.a.createElement(C.a,{disabled:this.state.loading,outline:!0,onClick:this.first,color:"primary"},"First"),i.a.createElement(C.a,{disabled:this.state.loading,outline:!0,onClick:this.prev,color:"dark"},"Prev"),i.a.createElement(C.a,{color:"light",disabled:!0},"Halaman ",this.state.page,"/",this.state.totalPage),i.a.createElement(C.a,{disabled:this.state.loading,outline:!0,onClick:this.next,color:"dark"},"Next"),i.a.createElement(C.a,{disabled:this.state.loading,outline:!0,onClick:this.last,color:"primary"},"Last"))),i.a.createElement(X,Object(d.a)({models:this.props.models,get:this.getSchedule,ref:function(t){return e.addSetting=t}},"models",this.props.models)),i.a.createElement(ae,{schedule:this.state.schedule,delete:function(t){return e.delete(t)},isOpen:this.state.modal,close:function(){return e.setState({modal:!1})}}))}}]),t}(c.Component),ae=function(e){return i.a.createElement(p.a,{isOpen:e.isOpen},i.a.createElement(h.a,{className:"bg-danger",toggle:e.close}),i.a.createElement(g.a,null,i.a.createElement("h5",{className:"text-center"},"Apakah Anda yakin ingin menghapus penganturan ini?"),i.a.createElement("div",{className:"row my-3"},i.a.createElement("div",{className:"col-md-6"},i.a.createElement(C.a,{color:"danger",onClick:function(){return e.delete(e.schedule)},block:!0},"Ya")),i.a.createElement("div",{className:"col-md-6"},i.a.createElement(C.a,{color:"light",onClick:e.close,block:!0},"Tidak")))))},ne=a(191),re=a(169),le=a.n(re),se=a(192),oe=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,preview:!1,img:""},a.open=function(){return a.setState({open:!0})},a.close=function(){return a.setState({open:!1})},a.preview=function(e){return a.setState({img:e,preview:!0})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(p.a,{size:"lg",modalClassName:"modal-preview",toggle:this.close,isOpen:this.state.open},i.a.createElement(h.a,{color:"info",toggle:this.close}),i.a.createElement(g.a,null,0===this.props.documents.length&&i.a.createElement(_.a,{color:"info"},i.a.createElement(ne.a,{className:"text-center text-white"},"Tidak ada dokumen yang di-upload")),i.a.createElement("div",{className:"row"},this.props.documents.map(function(t){return i.a.createElement(ce,Object.assign({preview:e.preview},t,{key:t.id}))})),i.a.createElement(p.a,{size:"lg",toggle:function(){return e.setState({preview:!1,img:""})},isOpen:this.state.preview},i.a.createElement(g.a,null,i.a.createElement("img",{src:this.state.img,alt:"",className:"w-100"})))))}}]),t}(c.Component),ce=function(e){return i.a.createElement("div",{className:"col-md-6"},i.a.createElement(_.a,null,i.a.createElement(se.a,{onClick:function(){return e.preview(e.data)},top:!0,src:e.data}),i.a.createElement(ne.a,null,e.name)))},ie=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={queues:{count:1,rows:[]},user:{name:"",id:"",type:""},loading:!1,documents:[]},a.getQueues=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=a.props.models.Queue;e&&a.setState({loading:!0}),t.collection({limit:15,offset:0,include:[{model:"Purpose",attributes:["name","id"]},{model:"Document",attributes:["name","id","data"]}],order:[["time","asc"]],where:{date:new Date,status:"Belum Datang"}}).then(function(e){var t=le.a.groupBy(e.rows,"time");a.setState({queues:{count:e.count,rows:t},loading:!1})})},a.componentDidMount=function(){a.getQueues(!0),G.a.locale("id");var e=a.props,t=e.socket,n=e.provider;document.title="Antrian Hari Ini",n.get().then(function(e){return a.setState({user:e},function(){document.title="".concat(a.state.user.name," | Antrian Hari Ini")})}),t.on("UPDATE_LIST",function(){return a.getQueues(!1)}),t.on("NEW_QUEUE",function(){return a.getQueues(!1)}),t.on("QUEUE_CALLED",function(){return a.getQueues(!1)}),t.on("QUEUE_ARRIVED",function(){return a.getQueues(!1)})},a.updateQueue=function(e,t){e.update({called:t}).then(function(){return a.getQueues()})},a.updateStatus=function(e){e.update({status:"Datang"}).then(function(){return a.getQueues()})},a.preview=function(e){return a.setState({documents:e},function(){return a.previewDocs.open()})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return"administrator"===this.state.type?i.a.createElement(m.a,{to:"/dashboard/main"}):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-body"},i.a.createElement("h5",{className:"m-0"},"Antrian"),i.a.createElement("hr",null),this.state.loading&&i.a.createElement(_.a,{className:"bg-dark border-0 shadow text-white"},i.a.createElement(ne.a,null,i.a.createElement("h4",{className:"text-center m-0"},i.a.createElement(f.a,{color:"light"}),"\xa0Loading"))),0===Object.keys(this.state.queues.rows).length&&!this.state.loading&&i.a.createElement(_.a,{className:"text-white bg-dark border-0 shadow-sm"},i.a.createElement(ne.a,null,i.a.createElement("h5",{className:"text-center m-0"},"Tidak ada antrian hari ini"))),Object.keys(this.state.queues.rows).sort().map(function(t,a){return i.a.createElement(_.a,{className:"my-2 bg-dark text-white border-0 shadow",key:a},i.a.createElement(ne.a,null,i.a.createElement("h5",{className:"m-0"},t)),i.a.createElement(T.a,{size:"sm",responsive:!0,dark:!0,className:"text-white",hover:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"pl-3"},"No. antrian"),i.a.createElement("th",null,"Nama"),i.a.createElement("th",null,"Tujuan"),i.a.createElement("th",null,"Tanggal - Jam"),i.a.createElement("th",null,"NIK"),i.a.createElement("th",null,"No. Telp"),i.a.createElement("th",null,"Aksi"))),i.a.createElement("tbody",null,i.a.createElement(i.a.Fragment,{key:a},e.state.queues.rows[t].map(function(a,n){return i.a.createElement(me,{updateStatus:e.updateStatus,data:a,user:e.state.user,onClick:e.updateQueue,q:t,rows:e.state.queues.rows,previewDocuments:e.preview,index:n,key:n})})))))})),i.a.createElement(oe,{ref:function(t){return e.previewDocs=t},documents:this.state.documents}))}}]),t}(c.Component),me=function(e){return i.a.createElement("tr",null,i.a.createElement(i.a.Fragment,null,i.a.createElement("td",{className:"pl-3"},e.data.queue_number),i.a.createElement("td",null,e.data.name),i.a.createElement("td",null,e.data.purpose.name),i.a.createElement("td",null,G()(e.data.date).format("DD MMMM YYYY")," - ",e.data.time),i.a.createElement("td",null,e.data.nik),i.a.createElement("td",null,e.data.phone),i.a.createElement("td",null,i.a.createElement(U.a,null,i.a.createElement(C.a,{onClick:function(){return e.previewDocuments(e.data.documents)},size:"sm",color:"light"},"Lihat Dokumen"),0===e.data.called&&i.a.createElement(C.a,{onClick:function(){return e.onClick(e.data,e.user.id)},color:"primary",size:"sm"},"Panggil"),0!==e.data.called&&e.data.called===e.user.id&&i.a.createElement(C.a,{onClick:function(){return e.updateStatus(e.data)},color:"warning",size:"sm"},"Datang"),0!==e.data.called&&e.data.called!==e.user.id&&i.a.createElement(C.a,{disabled:!0,size:"sm",color:"primary"},"Sudah Dipanggil")))))},ue=a(198),de=a(167),pe=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={tooltips:[{open:!1},{open:!1}],msg:"",limit:10,offset:0,page:1,totalPage:1,queues:{rows:[],count:1},loading:!1,date:[new Date],documents:[]},a.componentDidMount=function(){document.title="Laporan",G.a.locale("id"),a.getQueues(!0)},a.tooltipToggle=function(){a.setState({tooltips:[{open:!1},{open:!1}]})},a.onHover=function(e){var t=a.state.tooltips;"undefined"!==typeof e.target.name&&(t[parseInt(e.target.name)].open=!0),a.setState({tooltips:t})},a.getQueues=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&a.setState({loading:!0});var e=a.props.models.Queue,t=a.state,n=t.limit,r=t.offset;e.collection({limit:n,offset:r,include:[{model:"Purpose",attributes:["name","id"]},{model:"Document",attributes:["name","id","data"]}],order:[["time","asc"]]}).then(function(e){var t=Math.ceil(e.count/n);a.setState({loading:!1,queues:e,totalPage:t})})},a.next=function(){var e=a.state,t=e.totalPage,n=e.offset,r=e.limit,l=e.page;l=l<t?l+1:t,n=parseInt((l-1)*r),a.setState({offset:n,page:l},function(){return a.getQueues()})},a.prev=function(){var e=a.state,t=e.limit,n=e.page,r=e.totalPage;n=n>1?n-1:1;var l=parseInt((n-1)*t);a.setState({offset:l,totalPage:r,page:n},function(){return a.getQueues()})},a.onLimitChange=function(e){return a.setState({limit:e.target.value},function(){return a.getQueues()})},a.onDateChange=function(e){return a.setState({date:e},function(){return console.log(a.state.date)})},a.previewDocs=function(e){return a.setState({documents:e},function(){return a.preview.open()})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state.documents;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ne.a,{className:"border-bottom border-primary"},i.a.createElement("h5",{className:"m-0"},"Laporan"),i.a.createElement("hr",null),i.a.createElement(L.a,{className:"justify-content-between",noGutters:!0},i.a.createElement(R.a,{md:"2"},i.a.createElement(U.a,{size:"sm"},i.a.createElement(C.a,{onClick:this.prev,color:"primary"},i.a.createElement(y.b,null)),i.a.createElement(C.a,{disabled:!0,color:"dark"},"".concat(this.state.page,"/").concat(this.state.totalPage)),i.a.createElement(C.a,{onClick:this.next,color:"primary"},i.a.createElement(y.c,null)))),i.a.createElement(R.a,{md:"2"},i.a.createElement(U.a,{size:"sm"},i.a.createElement(C.a,{color:"light",disabled:!0},"Export File"),i.a.createElement(C.a,{onMouseOver:this.onHover,name:"0",id:"btn0",color:"success",title:"Export ke excel"},i.a.createElement(w.d,{onMouseOver:this.onHover})),this.state.tooltips[0].open&&i.a.createElement(ue.a,{placement:"top",autohide:!1,toggle:this.tooltipToggle,isOpen:this.state.tooltips[0],target:"btn0"},"Export ke Excel"),i.a.createElement(C.a,{onMouseOver:this.onHover,name:"1",id:"btn1",color:"danger",title:"Export ke excel"},i.a.createElement(w.e,{onMouseOver:this.onHover})),this.state.tooltips[1].open&&i.a.createElement(ue.a,{placement:"top",autohide:!1,toggle:this.tooltipToggle,isOpen:this.state.tooltips[1],target:"btn1"},"Export ke PDF"))),i.a.createElement(R.a,{md:"3"},i.a.createElement(x.a,{size:"sm"},i.a.createElement(V.a,{value:this.state.date,options:{mode:"range"},onChange:this.onDateChange,placeholder:"Tanggal",className:"form-control form-control-sm"}),i.a.createElement(D.a,{addonType:"append"},i.a.createElement(de.a,{className:"text-white bg-dark border-dark"},"Tanggal")))),i.a.createElement(R.a,{md:"2"},i.a.createElement(x.a,{size:"sm"},i.a.createElement(P.a,{value:this.state.limit,onChange:this.onLimitChange,type:"number"}),i.a.createElement(D.a,{addonType:"append"},"Data/Halaman"))))),i.a.createElement(T.a,{bordered:!0,hover:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"No. Antrian"),i.a.createElement("th",null,"Jam"),i.a.createElement("th",null,"Tanggal"),i.a.createElement("th",null,"Nama"),i.a.createElement("th",null,"Tujuan"),i.a.createElement("th",null,"NIK"),i.a.createElement("th",null,"Status"),i.a.createElement("th",null,"Preview"))),i.a.createElement("tbody",null,0===this.state.queues.rows.length&&!this.state.loading&&i.a.createElement("tr",null,i.a.createElement("td",{className:"text-center text-muted",colSpan:document.getElementsByTagName("th").length},"Belum ada antrian")),this.state.loading&&i.a.createElement("tr",null,i.a.createElement("td",{className:"text-center text-muted",colSpan:document.getElementsByTagName("th").length},i.a.createElement(f.a,{size:"sm",color:"secondary"}),"\xa0Loading")),this.state.queues.rows.map(function(t){return i.a.createElement(he,Object.assign({onClick:e.previewDocs},t,{key:t.id}))}))),i.a.createElement(ne.a,{className:"border-top border-primary"},i.a.createElement(L.a,{className:"justify-content-between",noGutters:!0},i.a.createElement(R.a,{md:"2"},i.a.createElement(U.a,{size:"sm"},i.a.createElement(C.a,{onClick:this.prev,color:"primary"},i.a.createElement(y.b,null)),i.a.createElement(C.a,{disabled:!0,color:"dark"},"".concat(this.state.page,"/").concat(this.state.totalPage)),i.a.createElement(C.a,{onClick:this.next,color:"primary"},i.a.createElement(y.c,null)))),i.a.createElement(R.a,{md:"2"},i.a.createElement(x.a,{size:"sm"},i.a.createElement(P.a,{value:this.state.limit,onChange:this.onLimitChange,type:"number"}),i.a.createElement(D.a,{addonType:"append"},"Data/Halaman"))))),i.a.createElement(oe,{documents:t,ref:function(t){return e.preview=t}}))}}]),t}(c.Component),he=function(e){return i.a.createElement("tr",null,i.a.createElement("td",null,e.queue_number),i.a.createElement("td",null,e.time),i.a.createElement("td",null,G()(e.date).format("DD MMMM YYYY")),i.a.createElement("td",null,e.name),i.a.createElement("td",null,e.purpose.name),i.a.createElement("td",null,e.nik),i.a.createElement("td",null,e.status),i.a.createElement("td",null,i.a.createElement(C.a,{color:"info",onClick:function(){return e.onClick(e.documents)},size:"sm"},"File")))},ge=function(e){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"col-md-9 overflow-scroll"},i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"".concat(this.props.match.path,"main"),component:u}),i.a.createElement(m.b,{exact:!0,path:"".concat(this.props.match.path,"user"),render:function(){return i.a.createElement(k,{models:e.props.models})}}),i.a.createElement(m.b,{exact:!0,path:"".concat(this.props.match.path,"pengaturan"),render:function(){return i.a.createElement(te,{models:e.props.models})}}),i.a.createElement(m.b,{exact:!0,path:"".concat(this.props.match.path,"tujuan"),render:function(){return i.a.createElement(Q,{models:e.props.models})}}),"operator"===this.props.user.type&&i.a.createElement(m.b,{exact:!0,path:"".concat(this.props.match.path,"antrian"),render:function(){return i.a.createElement(ie,{socket:e.props.socket,provider:e.props.provider,models:e.props.models})}}),i.a.createElement(m.b,{exact:!0,path:"".concat(this.props.match.path,"rekap-antrian"),render:function(){return i.a.createElement(pe,{socket:e.props.socket,provider:e.props.provider,models:e.props.models})}}),i.a.createElement(m.b,{component:Ee})))}}]),t}(c.Component),Ee=function(){return i.a.createElement(ne.a,{className:"d-flex flex-column justify-content-center align-items-center h-100"},i.a.createElement(y.f,{size:"15em",color:"#aaa"}),i.a.createElement("h3",{className:"m-0",style:{color:"#aaa"}},"Halaman tidak ada"))},fe=function(e){return i.a.createElement("div",{className:"card-header",id:"user-profile"},i.a.createElement("h5",{className:"m-0 text-truncate"},e.data.name),i.a.createElement("p",{className:"m-0 text-muted small"},e.data.type))},be=a(19),ve=function(e){return i.a.createElement("div",{className:"list-group list-group-flush"},i.a.createElement(be.c,{to:"/dashboard/main",className:"list-group-item list-group-item-action"},"Main Dashboard"),i.a.createElement(be.c,{to:"/dashboard/user",className:"list-group-item list-group-item-action"},"User"),i.a.createElement(be.c,{to:"/dashboard/rekap-antrian",className:"list-group-item list-group-item-action"},"Laporan"),i.a.createElement(be.c,{to:"/dashboard/tujuan",className:"list-group-item list-group-item-action"},"Dokumen & Tujuan"),i.a.createElement(be.c,{to:"/dashboard/pengaturan",className:"list-group-item list-group-item-action"},"Pengaturan"),i.a.createElement("div",{className:"logout-btn"},i.a.createElement("button",{onClick:function(){e.provider.remove().then(function(){e.logout()})},className:"btn btn-outline-dark btn-lg btn-block rounded-pill"},"Logout")))},ye=function(e){return i.a.createElement("div",{className:"list-group list-group-flush"},i.a.createElement(be.c,{to:"/dashboard/main",className:"list-group-item list-group-item-action"},"Main Dashboard"),i.a.createElement(be.c,{to:"/dashboard/antrian",className:"list-group-item list-group-item-action"},"Antrian Hari Ini"),i.a.createElement(be.c,{to:"/dashboard/rekap-antrian",className:"list-group-item list-group-item-action"},"Rekap Antrian"),i.a.createElement("div",{className:"logout-btn"},i.a.createElement("button",{onClick:function(){e.provider.remove().then(function(){e.logout()})},className:"btn btn-outline-dark btn-lg btn-block rounded-pill"},"Logout")))};a.d(t,"default",function(){return ke});var ke=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={height:0,user:{type:"...",name:"Loading"},login:!0},a.componentDidMount=function(){var e=a.props.login,t=document.querySelector("#dash-wrapper").clientHeight;a.setState({height:t,login:e})},a.componentWillReceiveProps=function(e){var t=e.login;a.setState({login:t})},a.logout=function(){var e=a.props,t=e.provider,n=e.check;t.remove().then(function(){a.setState({login:!1}),n()})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return this.props.login?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"bg-half"}),i.a.createElement("div",{className:"wrapper p-3"},i.a.createElement("div",{style:{height:"100%"},id:"dash-wrapper",className:"card border-0 shadow"},i.a.createElement("div",{style:{height:this.state.height},className:"row no-gutters"},i.a.createElement("div",{className:"col-md-3 border-right position-relative"},i.a.createElement(fe,{data:this.props.user}),"administrator"===this.props.user.type?i.a.createElement(ve,{provider:this.props.provider,logout:this.logout}):"operator"===this.props.user.type?i.a.createElement(ye,{provider:this.props.provider,logout:this.logout}):""),i.a.createElement(m.b,{path:"".concat(this.props.match.path,"/"),render:function(t){return i.a.createElement(ge,Object.assign({socket:e.props.socket,user:e.props.user,provider:e.props.provider,models:e.props.models},t))}}))))):i.a.createElement(m.a,{to:"/login"})}}]),t}(c.Component)}}]);
//# sourceMappingURL=8.5ba73fa4.chunk.js.map