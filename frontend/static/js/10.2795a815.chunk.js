(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{199:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(12),c=a(14),l=a(13),s=a(15),i=a(0),o=a.n(i),m=a(22),u=a(19),p=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={operator:0,active:!1},a.componentDidMount=function(){a.setState({operator:a.props.operator_left})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"col-sm-6 col-md-3"},this.props.operator_left>0?o.a.createElement("div",{onClick:this.props.onClick,className:"card hour-options my-1 mx-2 ".concat(this.props.active?"active-time":"")},o.a.createElement("div",{className:"card-body position-relative"},o.a.createElement("h4",{className:"m-0 text-center"},this.props.time)," ",o.a.createElement("span",{className:"front-office shadow-sm"},this.state.operator))):o.a.createElement("div",{className:"card my-1 mx-1 bg-danger border-0",title:"Penuh"},o.a.createElement("div",{className:"card-body position-relative text-white"},o.a.createElement("h4",{className:"m-0 text-center"},this.props.time)))))}}]),t}(i.Component),d=a(148),h=a.n(d),g=a(152),E=a.n(g),f=a(186),b=a(193),v=a(194),k=a(191),N=a(195),y=a(183),j=a(196),S=a(146),O=a(147),C=a(180),w=a(201),x=a(178),D=a(179),M=a(176),q=a(149),Y=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={img:""},a.onDrop=function(e){var t=e[0],n=new FileReader;n.onload=function(e){var t=e.target.result;a.setState({img:t},function(){return a.props.onSelect({name:a.props.file,data:t})})},n.readAsDataURL(t)},a.cancel=function(){a.setState({img:""},function(){a.props.onCancel(a.props.file)})},a.reject=function(e){return console.log(e)},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"col-md-3"},""!==this.state.img&&o.a.createElement("div",{className:"card border-0 shadow"},o.a.createElement("div",{className:"card-body"},o.a.createElement(C.a,{block:!0,color:"danger",onClick:this.cancel},"Batal")),o.a.createElement("img",{src:this.state.img,alt:"",className:"card-img"})),""===this.state.img&&o.a.createElement(M.a,{accept:["image/jpg","image/jpeg","image/png"],onDropRejected:this.reject,onDrop:this.onDrop},function(t){var a=t.getRootProps,n=t.getInputProps;return o.a.createElement("div",Object.assign({className:"card my-2",style:{cursor:"pointer"}},a()),o.a.createElement("div",{className:"card-body text-center"},o.a.createElement("input",n()),o.a.createElement("p",{className:"".concat(e.props.required?"text-danger":"text-success"," m-0")},e.props.required?"Harus di-upload":"File Opsional"),o.a.createElement(q.e,{style:{fontSize:80},className:"text-dark"}),o.a.createElement("p",{className:"m-0"},"Seret file ",e.props.file," di sini, atau klik di sini untuk memilih file"),o.a.createElement("p",{className:"text-muted m-0 small"},"Format : jpg, jpeg, png")))}))}}]),t}(i.Component),P=a(158),_=a(150),A=(a(151),a(153),a(185)),F=a(188),T=a(189);h.a.locale("id");var R=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={open:!1},a.open=function(){return a.setState({open:!0})},a.close=function(){return a.setState({open:!1})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{isOpen:this.state.open},o.a.createElement(x.a,{color:"danger"},"Konfirmasi Pendaftaran"),o.a.createElement(D.a,null,o.a.createElement("h4",{className:"m-0 text-center"},"Apakah Anda yakin mendaftar dengan data sebagai berikut")),o.a.createElement(A.a,null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,"Nama"),o.a.createElement("td",null,this.props.name)),o.a.createElement("tr",null,o.a.createElement("td",null,"Tujuan"),o.a.createElement("td",null,this.props.purpose)),o.a.createElement("tr",null,o.a.createElement("td",null,"Tanggal"),o.a.createElement("td",null,h()(this.props.date[0]).format("DD MMMM YYYY"))),o.a.createElement("tr",null,o.a.createElement("td",null,"Jam"),o.a.createElement("td",null,this.props.time)))),o.a.createElement(D.a,null,o.a.createElement(F.a,{noGutters:!0},o.a.createElement(T.a,{md:"6",className:"px-1"},o.a.createElement(C.a,{onClick:function(){return e.setState({open:!1})},block:!0,color:"light"},"Tidak")),o.a.createElement(T.a,{md:"6",className:"px-1"},o.a.createElement(C.a,{onClick:function(){return e.props.onClick()},block:!0,color:"success"},"Ya"))))))}}]),t}(i.Component),z=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"bg-half"}),o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"container my-5 py-5"},e.children)))},I=a(192),J=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={captcha:""},a.onChange=function(e){a.setState({captcha:e.target.value},function(){return a.props.onChange(a.state.captcha)})},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return!this.props.submitting&&o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-3"},o.a.createElement(f.a,null,o.a.createElement(I.a,{top:!0,src:"".concat("http://antriancapil.manadokota.go.id",":").concat("80","/captcha")}),o.a.createElement(k.a,null,o.a.createElement(y.a,{disabled:this.props.error,invalid:this.props.invalid,name:"captcha",onChange:this.onChange,value:this.state.captcha,placeholder:"Masukkan huruf seperti gambar di atas",size:"sm"})))))}}]),t}(i.Component),K=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={times:[],time:void 0,dates:[],date:[h()(new Date).format("YYYY-MM-DD")],minDate:[h()(new Date).format("YYYY-MM-DD")],loading:!1,clock:void 0,ready:!1,purposes:[],purpose:"",name:"",nik:"",phone:"",purpose_id:0,documents:[],requirements:[],captcha:"",queue:{},modal:!1,error:!1,submitting:!1,errors:{name:!1,nik:!1,phone:!1,purpose_id:!1,captcha:!1}},a.componentDidMount=function(){document.title="Daftar Antrian",a.getEnabledDate(),a.getPurposes(),h.a.locale("id")},a.componentWillReceiveProps=function(e){""!==e.date&&""!==e.clock&&a.setState({date:e.date,time:e.clock})},a.getPurposes=function(){a.props.models.Purpose.collection({limit:999,offset:0}).then(function(e){var t=e.rows.map(function(e){return{value:e.id,label:e.name}});a.setState({purposes:t})})},a.toggleClock=function(e,t){e===a.state.time?a.setState({time:void 0,clock:void 0}):a.setState({time:e,clock:t})},a.getEnabledDate=function(){a.props.models.Schedule.collection({attributes:["date"]}).then(function(e){e.rows.length>0?a.setState({dates:e.rows.map(function(e){return e.date}),date:[e.rows[0].date]},function(){return a.getHours(!0)}):a.setState({error:!0})})},a.getHours=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&a.setState({loading:!0});var e=a.props.models.Schedule,t=a.state.date;e.single(t[0],{attributes:["id","open","close","date","tolerance","processing_time","break_start","break_end","operator"]}).then(function(e){return a.setState({times:e.timeList,loading:!1,time:void 0,clock:void 0,error:!1})}).catch(function(){return a.setState({error:!0,loading:!1})})},a.toggleDate=function(e){e===a.state.date?a.setState({date:void 0}):a.setState({date:e})},a.dateChange=function(e){a.setState({date:e},function(){return a.getHours(!0)})},a.next=function(){var e=a.state,t=e.time,n=e.clock,r=e.date;a.props.next({time:t,clock:n,date:r})},a.onChange=function(e){return a.setState(Object(m.a)({},e.target.name,e.target.value))},a.onSelectChange=function(e){var t=a.props.models.Purpose;a.setState({purpose:e,purpose_id:e.value},function(){t.single(a.state.purpose.value).then(function(e){return a.setState({requirements:e.requirements})})})},a.select=function(e){var t=a.state.documents;t.push(e),a.setState({documents:t})},a.cancel=function(e){var t=a.state.documents.filter(function(t){return t.name!==e});a.setState({documents:t})},a.submit=function(){var e=a.props.models.Queue;a.setState({submitting:!0});document.querySelector(".wrapper");a.confirmRegister.close();var t=a.state,n=t.date,r=(t.time,t.phone),c=t.nik,l=t.name,s=t.documents,i=t.purpose_id,o=t.captcha,m=t.clock;e.create({date:n[0],time:m,phone:r,nik:c,name:l,documents:s,purpose_id:i,captcha:o}).then(function(e){a.setState({queue:e,date:"",clock:void 0,name:"",phone:0,nik:0,documents:[],purpose_id:void 0,modal:!0,captcha:"",requirements:[],submitting:!1,errors:{name:!1,nik:!1,phone:!1,captcha:!1}}),localStorage.setItem("queue_number",e.queue_number)}).catch(function(e){return a.setState({errors:e,submitting:!1})})},a.validate=function(){var e=a.state,t=e.phone,n=e.nik,r=e.name,c=e.purpose_id,l=e.captcha,s=(e.clock,e.errors);s.purpose_id=!(c>0),s.captcha=""===l,s.name=""===r,s.nik=""===n,s.phone=""===t,a.setState({errors:s}),document.querySelector(".wrapper").scrollTop=0},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.minDate,n=t.queue,r=t.name,c=t.captcha,l=(t.date,t.purpose_id),s=(t.clock,t.phone),i=t.nik,m=t.errors,d=m.name,g=m.nik,M=m.phone,A=m.captcha,F=m.purpose_id;return o.a.createElement(o.a.Fragment,null,this.state.submitting&&o.a.createElement(H,null),o.a.createElement(z,null,o.a.createElement(f.a,{className:"border-0 shadow"},o.a.createElement(b.a,null,o.a.createElement("div",{ref:function(t){return e.cont=t},className:"d-flex flex-row justify-content-between align-items-center"},o.a.createElement(u.b,{to:"/",color:"sm",outline:!0,className:"btn btn-outline-dark btn-sm d-inline"},o.a.createElement(q.b,null)),o.a.createElement(v.a,{className:"m-0"},o.a.createElement(q.d,{size:"1.5em"}),"\xa0Booking Antrian"))),o.a.createElement(k.a,null,o.a.createElement(N.a,{className:"my-1"},"Pilih Tanggal"),this.state.dates.length>0?o.a.createElement(E.a,{options:{enable:this.state.dates,minDate:a},onChange:this.dateChange,className:"form-control",value:this.state.date}):o.a.createElement(y.a,{disabled:!0,value:"Mengambil tanggal"}),o.a.createElement(N.a,{className:"my-1"},"Pilih Tujuan Mengantri"),this.state.purposes.length>0?o.a.createElement(P.a,{options:this.state.purposes,placeholder:"Pilih Tujuan",value:this.state.purpose,onChange:this.onSelectChange}):o.a.createElement(y.a,{disabled:!0,placeholder:"Mengambil daftar tujuan mengantri"}),F&&o.a.createElement("p",{className:"small text-danger"},"Pilih tujuan mengantri"),this.state.requirements.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("hr",null),this.state.requirements.length>0&&o.a.createElement("p",{className:"text-muted small"},"Pengantri harap membawa dokumen sebagai berikut"),o.a.createElement("div",{className:"row"},this.state.requirements.map(function(e){return o.a.createElement(L,Object.assign({},e,{key:e.id}))})),this.state.requirements.length>0&&o.a.createElement("p",{className:"text-muted small"},"Atau upload berkas di sini"),o.a.createElement("div",{className:"row"},this.state.requirements.map(function(t,a){return o.a.createElement(Y,{onCancel:e.cancel,file:t.name,onSelect:e.select,required:t.required,key:a})})),o.a.createElement("hr",null)),o.a.createElement(N.a,{className:"my-1"},"NIK Pengantri"),o.a.createElement(y.a,{invalid:g,disabled:this.state.submitting,name:"nik",value:this.state.nik,onChange:this.onChange,type:"number",className:"my-1",placeholder:"NIK Pengantri"}),g&&o.a.createElement(j.a,{invalid:!0},"Masukkan NIK pengantri"),o.a.createElement(N.a,{className:"m-0"},"Nama Lengkap"),o.a.createElement(y.a,{invalid:d,disabled:this.state.submitting,name:"name",value:this.state.name,onChange:this.onChange,placeholder:"Nama pengantri",type:"text",className:"my-1"}),d&&o.a.createElement(j.a,{invalid:!0},"Masukkan Nama Lengkap"),o.a.createElement(N.a,{className:"m-0"},"Nomor Telepon"),o.a.createElement(y.a,{invalid:M,disabled:this.state.submitting,name:"phone",value:this.state.phone,onChange:this.onChange,placeholder:"Nomor Telepon",type:"number",className:"my-1"}),M&&o.a.createElement(j.a,{invalid:!0},"Masukkan Nomor Telepon"),o.a.createElement("hr",null),o.a.createElement("p",{className:"small text-muted my-1"},"Pilih Tanggal dan Jam"),o.a.createElement(S.a,{color:"danger",isOpen:this.state.error},"Booking tidak dibuka pada ",h()(this.state.date[0]).format("dddd, DD MMMM YYYY")),this.state.dates.length>0&&o.a.createElement(o.a.Fragment,null,"undefined"!==typeof this.state.times&&o.a.createElement(o.a.Fragment,null,void 0===this.state.time&&this.state.times.length>0&&o.a.createElement(S.a,{color:"danger"},o.a.createElement(_.c,null)," Pilih jam")),this.state.loading?o.a.createElement("h4",{className:"text-center m-0"},o.a.createElement(O.a,{color:"primary"}),"\xa0Loading"):o.a.createElement("div",{className:"row no-gutters"},"undefined"!==typeof this.state.times&&o.a.createElement(o.a.Fragment,null,this.state.times.map(function(t,a){return o.a.createElement(p,Object.assign({active:e.state.time===a,onClick:e.toggleClock.bind(e,a,t.time),key:a},t,{id:a}))})))),o.a.createElement("hr",null),o.a.createElement(J,{invalid:A,onChange:function(t){return e.setState({captcha:t})},submitting:this.state.submitting,error:this.state.error}),o.a.createElement("hr",null),void 0!==this.state.time&&""!==r&&""!==i&&""!==s&&void 0!==l&&""!==c?o.a.createElement(C.a,{onClick:function(){return e.confirmRegister.open()},color:"success"},"Daftar"):o.a.createElement(C.a,{color:"success",onClick:this.validate,type:"button"},"Daftar"))),o.a.createElement(R,{name:this.state.name,date:this.state.date,purpose:this.state.purpose.label,ref:function(t){return e.confirmRegister=t},time:this.state.clock,onClick:this.submit}),Object.keys(n).length>0&&o.a.createElement(w.a,{isOpen:this.state.modal},o.a.createElement(x.a,{className:"bg-success text-white"},"Pendaftaran berhasil"),o.a.createElement(D.a,null,o.a.createElement("h1",{className:"m-0 text-center text-success"},o.a.createElement(_.b,{size:"2em"})),o.a.createElement("h4",{className:"m-0 font-weight-light text-center"},n.name),o.a.createElement("p",{className:"m-0 text-muted text-center"},"Antrian tanggal ",h()(n.date).format("dddd, DD MMMM YYYY")),o.a.createElement("hr",null),o.a.createElement("p",{className:"m-0"},"Nomor antrian : ",n.queue_number),o.a.createElement("p",{className:"m-0"},"Jam : ",n.time),o.a.createElement("hr",null),o.a.createElement(u.b,{to:"/",className:"btn btn-primary"},"Kembali")))))}}]),t}(i.Component),L=function(e){return o.a.createElement("div",{className:"col-md-2"},o.a.createElement(S.a,{color:"info"},e.name))},H=function(){return o.a.createElement("div",{className:"loading-container"},o.a.createElement(O.a,{color:"light",size:"lg",className:"my-2"}),o.a.createElement("h5",{className:"m-0 text-white"},"Mengirim data"))};a.d(t,"default",function(){return B});var B=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){h.a.locale("id")}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(K,{models:this.props.models}))}}]),t}(i.Component)}}]);
//# sourceMappingURL=10.2795a815.chunk.js.map