(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{136:function(e,t){},149:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),o=a.n(l),c=(a(85),a(39)),s=a.n(c),i=a(44),m=a(10),u=a(11),d=a(13),g=a(12),h=a(14),E=a(21),p=a(15),f=a(73),b=a.n(f),v=a(74),y=a.n(v),k=a(72),w=a(42),O=a(151),j=a(152),N=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",loading:!1,error:!1},a.onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.login=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;a.props.login(n,r)},a.componentWillReceiveProps=function(e){var t=e.loading,n=e.error;a.setState({loading:t,error:n})},a._dissmissError=function(){a.setState({error:!1})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bg-half animated slideInDown fast"}),r.a.createElement(E.b,{className:"login-btn",to:"/"},"Home"),r.a.createElement("div",{className:"wrapper d-flex justify-content-center align-items-center"},r.a.createElement("div",{style:{maxWidth:600},className:"container"},r.a.createElement("div",{className:"card border-0 shadow"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"mb-2"},"Login"),r.a.createElement("form",{className:"form-group"},r.a.createElement("input",{disabled:this.state.loading,type:"text",onChange:this.onChange,name:"username",value:this.state.username,placeholder:"Username",className:"form-control ".concat(e?"is-invalid":""," rounded-pill my-2")}),r.a.createElement("input",{disabled:this.state.loading,type:"password",onChange:this.onChange,name:"password",value:this.state.password,placeholder:"Password",className:"form-control ".concat(e?"is-invalid":""," rounded-pill my-2")}),r.a.createElement("hr",null),this.state.loading&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{size:"sm",color:"success"},r.a.createElement(j.a,{size:"sm",color:"success"}),"\xa0Loading"),r.a.createElement("hr",null)),r.a.createElement(O.a,{isOpen:e,color:"danger",toggle:this._dissmissError},"Login tidak valid"),r.a.createElement("button",{type:"submit",onClick:this.login,className:"btn btn-outline-success rounded-pill btn-block"},"Login")))))))}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={login:!1,loading:!1,error:!1},a.componentWillReceiveProps=function(e){var t=e.login;a.setState({login:t})},a.login=function(e,t){a.setState({loading:!0,error:!1});var n=a.props,r=n.provider,l=n.check;r.set({username:e,password:t}).then(function(){a.setState({login:!0,loading:!1},function(){return l()})}).catch(function(e){a.setState({error:!0,loading:!1}),console.log(e)})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.login;this.setState({login:e})}},{key:"render",value:function(){return document.title="Login ke Dashboard",this.props.login?r.a.createElement(p.a,{to:"/dashboard/main"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(N,Object.assign({},this.props,{error:this.state.error,loading:this.state.loading,login:this.login})))}}]),t}(n.Component),A=a(153),P=a(154),x=a(20),_=a.n(x),C=(a(77),a(71)),D=a.n(C),R=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={queues:{count:1,rows:[]},loading:!1},a.componentDidMount=function(){var e=a.props.socket;_.a.locale("id"),a.getQueues(!0),e.on("UPDATE_LIST",function(){return a.getQueues(!1)}),e.on("NEW_QUEUE",function(){return a.getQueues(!1)}),e.on("QUEUE_CALLED",function(){return a.getQueues(!1)}),e.on("QUEUE_ARRIVED",function(){return a.getQueues(!1)})},a.getQueues=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props.models.Queue;e&&a.setState({loading:!0}),t.collection({limit:25,offset:0,where:{date:_()(new Date).format("YYYY-MM-DD"),called:0},orderBy:[["time","asc"],["id","asc"]],include:[{model:"Purpose",attributes:["id","name"]}]}).then(function(e){e.rows=D.a.sortBy(e.rows,function(e){return e.time}),a.setState({queues:e,loading:!1})})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bg-half"}),r.a.createElement("div",{className:"wrapper p-3"},r.a.createElement(A.a,{style:{height:"100%"},className:"border-0 shadow overflow-scroll"},r.a.createElement("div",{className:"p-3"},r.a.createElement("h3",{className:"m-0 text-center"},"Pengantri"),r.a.createElement("h5",{className:"m-0 text-center"},"Hari ",_()().format("dddd, DD MMMM YYYY")),r.a.createElement("p",{className:"m-0 text-center"},"Jumlah pengantri : ",this.state.queues.count)),r.a.createElement(P.a,{bordered:!0,striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),r.a.createElement("th",null,"Nama"),r.a.createElement("th",null,"NIK"),r.a.createElement("th",null,"Nomor Pengantri"),r.a.createElement("th",null,"Jam"),r.a.createElement("th",null,"Tujuan"))),r.a.createElement("tbody",null,this.state.loading&&r.a.createElement("tr",null,r.a.createElement("td",{colSpan:document.getElementsByTagName("th").length},r.a.createElement("h4",{className:"m-0 text-center"},r.a.createElement(j.a,{size:"sm"}),"\xa0Loading"))),!this.state.loading&&this.state.queues.rows.map(function(e,t){return r.a.createElement(T,Object.assign({index:t+1},e))}),!this.state.loading&&0===this.state.queues.rows.length&&r.a.createElement("tr",null,r.a.createElement("td",{colSpan:document.getElementsByTagName("th").length},r.a.createElement("h4",{className:"m-0 text-center"},"Tidak ada antrian"))))))))}}]),t}(n.Component),T=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.index),r.a.createElement("td",null,e.name.toUpperCase()),r.a.createElement("td",null,e.nik),r.a.createElement("td",null,e.queue_number),r.a.createElement("td",null,e.time),r.a.createElement("td",null,e.purpose.name))},I=(a(149),a(40)),L=a.n(I),U=Object(n.lazy)(function(){return Promise.all([a.e(0),a.e(1),a.e(4),a.e(7)]).then(a.bind(null,559))}),M=Object(n.lazy)(function(){return a.e(9).then(a.bind(null,563))}),Q=Object(n.lazy)(function(){return Promise.all([a.e(0),a.e(8)]).then(a.bind(null,564))}),Y=Object(n.lazy)(function(){return Promise.all([a.e(0),a.e(1),a.e(6),a.e(10)]).then(a.bind(null,561))}),q=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_IP_ADDRESS:"http://antriancapil.manadokota.go.id",REACT_APP_PORT:"80"}),z=new b.a(q.REACT_APP_IP_ADDRESS,q.REACT_APP_PORT,localStorage),B=y()("".concat(q.REACT_APP_IP_ADDRESS,":").concat(q.REACT_APP_PORT)),J=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={ready:!1,models:{},provider:{},error:!1,user:{type:"...",name:"Loading"},login:!1,dark:!1},a.componentDidMount=Object(i.a)(s.a.mark(function e(){var t,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.connect();case 3:return t=e.sent,e.next=6,z.getAuthProvider();case 6:n=e.sent,Object(k.loadReCaptcha)("6Lc259UUAAAAANmApCOJJboq3_AeAYTZiJqg5M6W"),n.get().then(function(e){a.setState({models:t,provider:n,ready:!0,user:e,login:!0})}).catch(function(){return a.setState({login:!1,ready:!0,models:t,provider:n})}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),a.setState({error:!0,ready:!0});case 15:document.addEventListener("keydown",function(e){e.ctrlKey&&e.altKey&&"\u2202"===e.key&&(console.log("true"===localStorage.getItem("dark")),"true"===localStorage.getItem("dark")?(localStorage.setItem("dark","false"),a.setState({dark:!1})):(localStorage.getItem("dark"),localStorage.setItem("dark","true"),a.setState({dark:!0})))}),"true"===(r=localStorage.getItem("dark"))?a.setState({dark:!0}):"false"===r&&a.setState({dark:!1}),console.log(localStorage.getItem("dark"));case 19:case"end":return e.stop()}},e,null,[[0,11]])})),a.check=function(){a.state.provider.get().then(function(e){a.setState({ready:!0,user:e,login:!0})}).catch(function(){return a.setState({login:!1,ready:!0})})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.state.error?r.a.createElement(F,null):this.state.ready?r.a.createElement(n.Suspense,{fallback:r.a.createElement(W,{msg:"Tunggu Sebentar"})},r.a.createElement(E.a,null,r.a.createElement(p.b,{path:"/",exact:!0,render:function(t){return r.a.createElement(M,Object.assign({},t,{dark:e.state.dark,user:e.state.user}))}}),r.a.createElement(p.b,{path:"/cek",exact:!0,render:function(t){return r.a.createElement(Q,Object.assign({},t,{models:e.state.models}))}}),r.a.createElement(p.b,{path:"/register",render:function(t){return r.a.createElement(Y,Object.assign({models:e.state.models},t))}}),r.a.createElement(p.b,{path:"/dashboard",render:function(t){return r.a.createElement(U,Object.assign({provider:e.state.provider,check:e.check,user:e.state.user,login:e.state.login,models:e.state.models,socket:B},t))}}),r.a.createElement(p.b,{path:"/login",render:function(t){return r.a.createElement(S,Object.assign({provider:e.state.provider,check:e.check,user:e.state.user,login:e.state.login},t))}}),r.a.createElement(p.b,{path:"/list",render:function(t){return r.a.createElement(R,Object.assign({models:e.state.models,socket:B},t))}}))):r.a.createElement(W,{msg:"Loading"})}}]),t}(n.Component),W=function(e){return r.a.createElement("div",{className:"container-fluid bg-loading vh-100 flex-column d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"w-25 my-3"},r.a.createElement("img",{src:L.a,className:"mdo-logo d-block m-auto",alt:""})),r.a.createElement("h4",{className:"text-white my-3"},e.msg),r.a.createElement("div",{className:"spinner-border text-white"}))},F=function(){return r.a.createElement("div",{className:"container-fluid bg-loading vh-100 flex-column d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"w-25 my-3"},r.a.createElement("img",{src:L.a,className:"mdo-logo d-block m-auto",alt:""})),r.a.createElement("h4",{className:"text-white"},"Terjadi Kesalahan"),r.a.createElement("p",{className:"text-white m-0"},"Silakan reload (muat ulang) halaman ini"))},K=J;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},40:function(e,t,a){e.exports=a.p+"static/media/logo.5e5e6ae2.png"},80:function(e,t,a){e.exports=a(150)},85:function(e,t,a){}},[[80,3,5]]]);
//# sourceMappingURL=main.ab82b817.chunk.js.map